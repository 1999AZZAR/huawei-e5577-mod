var g_sambaData="",g_printerenable=!1,g_printerName="",g_sdsharemode=-1,MAX_PRINTLIST_NUMBER=8;function initPage(){getAjaxData("api/sdcard/sdcard",(function(a){var e=xml2object(a);g_sdsharemode=e.response.sdcard.SDShareMode}),{sync:!0}),getAjaxData("api/sdcard/sdcardsamba",(function(a){var e=xml2object(a);g_sambaData=e.response,$("#enable_sharing_samba").attr("checked",1==g_sambaData.enabled),g_printerenable=1==g_sambaData.printerenable}),{sync:!0})}function apply(){g_sambaData.enabled=$("#enable_sharing_samba").get(0).checked?1:0;var a=object2xml("request",g_sambaData);saveAjaxData("api/sdcard/sdcardsamba",a,(function(a){var e=xml2object(a);isAjaxReturnOK(e)?(button_enable("apply_button","0"),showInfoDialog(common_success)):showInfoDialog(common_failed)}))}$(document).ready((function(){initPage(),1==g_sdsharemode&&(showInfoDialog(IDS_share_samba_server_ennabled),$("#enable_sharing_samba").attr("disabled","disabled")),$("#enable_sharing_samba").click((function(){apply()})),g_printerenable?($("#printerenable").text(IDS_system_samba_description_printer),$("#smaba_printer_server").show(),getAjaxData("api/sdcard/printerlist",(function($xml){var ret=xml2object($xml);g_printerName=ret.response.printerlist;for(var tab_printer="",i=1;i<=MAX_PRINTLIST_NUMBER;i++){var printername=eval("g_printerName.printername"+i);void 0!==printername&&""!=printername&&null!=printername&&(tab_printer+="<tr><td height='32'  align='left' width='300px'>"+XSSResolveCannotParseChar(printername)+"</td></tr>")}$("#printer_name").append(tab_printer)}))):($("#printerenable").text(IDS_system_samba_description),$("#smaba_printer_server").hide())}));
