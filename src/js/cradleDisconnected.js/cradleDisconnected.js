var PPPOE_NOACCOUNT="905",PPPOE_ERRORACCOUNT="906",CRADLE_NETLINT_EXIST="1";function main_beforeready(){"1"==g_setup_wizard_page&&"hilink"!=g_Driver_classify&&"1"==g_auto_update_enable&&(HOME_PAGE_URL="quicksetup.html")}function initPage(){getAjaxData("api/cradle/status-info",(function(e){var a=xml2object(e);if("response"==a.type)if(CRADLE_NETLINT_EXIST==a.response.cradlestatus){if(PPPOE_NOACCOUNT!=a.response.connectstatus&&PPPOE_ERRORACCOUNT!=a.response.connectstatus)gotoPageWithoutHistory(HOME_PAGE_URL);else if(PPPOE_NOACCOUNT==a.response.connectstatus){var n=IDS_ethernet_username_password_empty.replace("%s","PPPoE");$("#crandle_notes").html(n),$("#cradleusername").removeAttr("value"),$("#cradlepassword").removeAttr("value")}else if(PPPOE_ERRORACCOUNT==a.response.connectstatus){var r=g_main_convergedStatus.CurrentLanguage,t=[],l=!1;if(void 0!==(t=CreateArray(LANGUAGE_DATA.usermanual_language_list.support_language.language))&&""!=t){var o=0;for(o=0;o<t.length;o++)r.replace(/_/,"-")==t[o].replace(/_/,"-")&&(l=!0)}0==l&&(r=LANGUAGE_DATA.usermanual_language_list.default_language.replace(/_/,"-"));var s="<span class='pppoe_help_link clr_blue_a clr_blue_hover'><a href='../usermanual/"+r+"/usermanual/faq_plugin/web_faq_task_00009.html'>"+IDS_ethernet_pppoe_conn_help+"</a></span>",c=IDS_ethernet_pppoe_conn_fail.replace("%s",s);$("#crandle_notes").html(c)}}else gotoPageWithoutHistory(HOME_PAGE_URL)}),{sync:!0})}function cradle_validateInput(e,a){return $("#crandleUsername_error").html(""),$("#crandlePassword_error").html(""),""==e?($("#crandleUsername_error").html(settings_hint_user_name_empty).attr("class","error_message"),$("#cradleusername").focus(),$("#cradleusername").val(""),button_enable("link_connetcioncradle","0"),!1):checkInputPPPoEChar(e)?checkInputPPPoEChar(a)?""!=a||($("#crandlePassword_error").html(dialup_hint_password_empty).attr("class","error_message"),$("#cradlepassword").focus(),$("#cradlepassword").val(""),button_enable("link_connetcioncradle","0"),!1):($("#crandlePassword_error").html(IDS_ethernet_pppoe_password).attr("class","error_message"),$("#cradleusername").val(""),$("#cradleusername").focus(),$("#cradlepassword").val(""),button_enable("link_connetcioncradle","0"),!1):($("#crandleUsername_error").html(IDS_ethernet_pppoe_username).attr("class","error_message"),$("#cradleusername").val(""),$("#cradleusername").focus(),$("#cradlepassword").val(""),button_enable("link_connetcioncradle","0"),!1)}function onApply(){var e=$.trim($("#cradleusername").val()),a=$.trim($("#cradlepassword").val());if(cradle_validateInput(e,a)){var n={pppoeuser:wifiSsidResolveCannotParseChar(e),pppoepwd:wifiSsidResolveCannotParseChar(a)},r=object2xml("request",n);button_enable("link_connetcioncradle","0"),saveAjaxData("api/cradle/basic-info",r,(function(e){xml2object(e),window.location=HOME_PAGE_URL}),{enc:!0})}}main_beforeready(),$(document).ready((function(){initPage(),getLoginStatus(),setLoginStatus("cradleDisconnected.html"),$("#link_login_cradleDisconnection").click((function(){window.location=HOME_PAGE_URL})),button_enable("link_connetcioncradle","0"),$("#cradleusername").live("input change cut paste keydown keyup",(function(){""==$("#cradleusername").val()||""==$("#cradlepassword").val()?button_enable("link_connetcioncradle","0"):button_enable("link_connetcioncradle","1")})),$("#cradlepassword").live("input change cut paste keydown keyup",(function(e){""==$("#cradleusername").val()||""==$("#cradlepassword").val()?button_enable("link_connetcioncradle","0"):MACRO_KEYCODE!=e.keyCode&&button_enable("link_connetcioncradle","1")})),$("#link_connetcioncradle").bind("click",(function(){isButtonEnable("link_connetcioncradle")&&getLoginStatus(onApply,"cradleDisconnected.html")&&onApply()}))}));
