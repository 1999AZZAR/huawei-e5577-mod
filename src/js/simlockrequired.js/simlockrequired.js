var g_postfix=window.location.search,simPageVar={SIMPin:""},SIM_STATUS_LOCKED=1,SIM_LOCK_VERSION_5="5",simlock_4_status=!1;function main_beforeready(){if(null!=g_postfix){var t=g_postfix.length,i=g_postfix.indexOf("?");g_postfix=checkPageExist(g_PageUrlTree,g_postfix.substring(i+1,t))?g_postfix.substring(i+1,t)+".html":""}else g_postfix="";"1"==g_setup_wizard_page&&"hilink"!=g_Driver_classify&&"1"==g_auto_update_enable&&(HOME_PAGE_URL="quicksetup.html")}function initPage(){button_enable("simlock_button_apply","0"),getAjaxData("api/pin/simlock",(function(t){var i=xml2object(t);"response"==i.type&&(SIM_STATUS_LOCKED==i.response.SimLockEnable?($("#label_SimlockTimes").text(i.response.SimLockRemainTimes),parseInt(i.response.SimLockRemainTimes,10)<1?$("#input_simunlock").attr("disabled","disabled"):($("#input_simunlock").removeAttr("disabled"),$("#input_simunlock").val(""),$("#input_simunlock").focus()),void 0!==i.response.SimLockVersion&&SIM_LOCK_VERSION_5==i.response.SimLockVersion?(simlock_4_status=!0,$("#input_simunlock").attr("maxlength","16")):(simlock_4_status=!1,$("#input_simunlock").attr("maxlength","8"))):gotoPageWithoutHistory(HOME_PAGE_URL+window.location.search))}),{sync:!0})}function simLockValidateInput(){var t=$("#input_simunlock").val(),i="",o="";return 1==simlock_4_status?(i=/^[A-Za-z0-9]{16}$/,o=dialup_hint_simlock_code_valid_type_1):(i=/^[0-9]{8}$/,o=dialup_hint_simlock_code_valid_type),""==t||" "==t||null==t?($("#simunlock_error").html(dialup_hint_password_empty).attr("class","error_message"),$("#input_simunlock").focus(),$("#input_simunlock").val(""),button_enable("simlock_button_apply","0"),!1):i.exec(t)?($("#simunlock_error").html(""),!0):($("#simunlock_error").html(o).attr("class","error_message"),$("#input_simunlock").focus(),$("#input_simunlock").val(""),button_enable("simlock_button_apply","0"),!1)}function onApply(){if($.each($("input"),(function(){$(this).blur()})),isButtonEnable("simlock_button_apply")&&simLockValidateInput()){var t=$("#input_simunlock").val(),i=object2xml("request",{SimLockCode:t});button_enable("simlock_button_apply","0"),$("#input_simunlock").val(""),saveAjaxData("api/pin/verify-simlock",i,(function(t){var i=xml2object(t);isAjaxReturnOK(i)?redirectOnCondition()||(".html"==g_postfix||""==g_postfix?gotoPageWithoutHistory(HOME_PAGE_URL):gotoPageWithoutHistory(g_postfix)):(showInfoDialog(sim_lock_validate_failed),setTimeout((function(){return initPage(),!1}),1500))}),{enc:!0})}}main_beforeready(),$(document).ready((function(){$("#input_simunlock").focus(),$("#input_simunlock").bind("keyup change input paste cut keydown",(function(){1==simlock_4_status?$(this).val().length>=16?button_enable("simlock_button_apply","1"):button_enable("simlock_button_apply","0"):$(this).val().length>=8?button_enable("simlock_button_apply","1"):button_enable("simlock_button_apply","0")})),$("#simlock_button_apply").bind("click",(function(){isButtonEnable("simlock_button_apply")&&getLoginStatus(onApply,"simlockrequired.html")&&onApply()})),1==g_feature.continue_button?$("#link_login").show():$("#link_login").hide(),$("#device_locked_title").hide(),$("#device_locked_content").hide(),$("#device_locked_but").hide(),$("#unlock_device").show(),$("#unlock_device_title").show(),$("#unlock_device_content").show(),$("#unlock_device_but").show(),initPage(),getLoginStatus(),setLoginStatus("simlockrequired.html"),$("#link_login").click((function(){window.location=HOME_PAGE_URL})),$("#link_logins").click((function(){window.location=HOME_PAGE_URL}))}));
