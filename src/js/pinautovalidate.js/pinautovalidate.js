var pin_status={SimState:"",PinOptState:"",SimPinTimes:"",SimPukTimes:""},pinautovalidate_getPinData={SimSavepinStatus:"",SimSavepinScid:""},pinautovalidate_savePinData={SimSavepinStatus:"",SimSavepinPIN:""},remaining_times=0;function checkButtonEnable(){$("#auto_pincode").val().length>=4||0==$("input:checked").val()?button_enable("validate_apply","1"):button_enable("validate_apply","0")}function updatePinInputEnable(a){MACRO_PIN_DISABLE==a?($("#auto_pincode").attr("disabled","disabled").val(""),$("input[name='auto_validation']").attr("disabled","disabled")):1==$("input:checked").val()?($("#auto_pincode").removeAttr("disabled"),$("#auto_pincode").val(""),$("#auto_pincode").focus()):$("#auto_pincode").attr("disabled","disabled").val("")}function validateEnabled(){$(".autovalidate_enable").attr("checked","checked"),$(".current_status").html(dialup_label_auto_validation_enabled)}function validateDisabled(){$(".autovalidate_disable").attr("checked","checked"),$(".current_status").html(dialup_label_auto_validation_disabled)}function validateFormat(){if(0==$("input:checked").val())return!0;var a=$("#auto_pincode").val();return""==a||" "==a||null==a?(showErrorUnderTextbox("auto_pincode",dialup_hint_current_pin_empty),!1):!!/^[0-9]{4,8}$/.exec(a)||(showErrorUnderTextbox("auto_pincode",dialup_hint_pin_code_valid_type),$(this).val(""),!1)}function checkPukRequired(){var a;getAjaxData("api/pin/status",(function(t){a=xml2object(t)}),{sync:!0}),"response"==a.type&&(pin_status.SimState=a.response.SimState,pin_status.PinOptState=a.response.PinOptState,pin_status.SimPinTimes=a.response.SimPinTimes,pin_status.SimPukTimes=a.response.SimPukTimes,MACRO_PUK_REQUIRED==a.response.SimState?gotoPageWithoutHistory("pukrequired.html"):($(".main_content").show(),$(".remaining_times").html(pin_status.SimPinTimes),getAjaxData("api/pin/save-pin",(function(a){var t=xml2object(a);"response"==t.type&&(1==(pinautovalidate_getPinData=t.response).SimSavepinStatus?validateEnabled():validateDisabled(),updatePinInputEnable(pin_status.PinOptState))}),{sync:!0})))}function initPage(){checkPukRequired(),button_enable("validate_apply","0"),$("input[name='auto_validation']").attr("disabled","disabled"),$("#auto_pincode").removeAttr("disabled"),""!=user_config.pinautovalidate?validateEnabled():validateDisabled(),$("#auto_pincode").val(user_config.pinautovalidate)}function onApply(){isButtonEnable("validate_apply")&&(clearAllErrorLabel(),button_enable("validate_apply","0"),postUserConfig(!0,!1))}redirectOnCondition(null,"pincodeautovalidate"),$(document).ready((function(){$("#validate_apply").bind("click",onApply),$("input[type=radio]").bind("click",updatePinInputEnable),$("input").bind("change input paste cut keydown keyup",(function(a){MACRO_KEYCODE!=a.keyCode&&(""!=$(this).val()?validateEnabled():validateDisabled(),checkButtonEnable(),user_config.pinautovalidate=$(this).val())})),initPage()}));
