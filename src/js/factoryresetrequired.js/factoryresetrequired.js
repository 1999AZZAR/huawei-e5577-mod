function doFactoryReset(){clearDialog(),showWaitingDialog(common_waiting,sd_hint_wait_a_few_moments);var t="";getConfigData("config/lan/config.xml",(function(o){var n=xml2object(o);"config"==n.type&&(t=n.config.dhcps.ipaddress)}),{sync:!0}),$.ajax({type:"GET",url:"http://"+location.hostname+":5080/cgi-bin/factoryreset.cgi?cmd=do_reset",success:function(o,n,e){var i=xml2object(o);if(!isAjaxReturnOK(i))return closeWaitingDialog(),showInfoDialog(common_failed),!1;ping_setPingAddress(t),setTimeout(startPing,5e4)},dataType:"xml"})}$((function(){$("#button_factoryreset").bind("click",(function(){if(isButtonEnable("button_factoryreset"))return button_enable("button_factoryreset","0"),showConfirmDialog(system_hint_restore,doFactoryReset,(function(){button_enable("button_factoryreset","1")}),null,(function(){button_enable("button_factoryreset","1")})),!1})),factoryResetRequired||gotoPageWithoutHistory(HOME_PAGE_URL+window.location.search)}));
