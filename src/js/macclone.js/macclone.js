var g_mac_addressData=null,current_MAC_Address=null,host_MAC_Address=null,g_default_mac_address=null;function macclone_initPage(){getAjaxData("api/cradle/mac-info",(function(e){var a=xml2object(e);"response"==a.type?(g_mac_addressData=a.response,$("#ethernet_curr_mac_address").val(g_mac_addressData.currentmac),$("#ethernet_host_mac_address").val(g_mac_addressData.hostmac)):(showInfoDialog(common_failed),$("#ethernet_curr_mac_address").val(""),$("#ethernet_host_mac_address").val(""))}),{sync:!0})}function wan_isValidMacAddress(e){var a=0,r=0,t=0;if("ff:ff:ff:ff:ff:ff"==(e=e.toLowerCase())||"00:00:00:00:00:00"==e)return!1;var n=e.split(":");if(6!=n.length)return!1;for(r=0;r<6;r++){if(2!=n[r].length)return!1;for(t=0;t<n[r].length;t++)if(!((a=n[r].charAt(t))>="0"&&a<="9"||a>="a"&&a<="f"))return!1}return!((a=parseInt(n[0].charAt(1),16))%2)}function macclone_checkMac(){var e=!0,a=$.trim($("#ethernet_curr_mac_address").val());return 0==a.length||null==a?($("#ethernet_curr_mac_address").focus(),$("#ethernet_curr_mac_address").val(""),showErrorUnderTr("mac_error_msg",IDS_mac_clone_mac_address_empty),e=!1):a.length>0&&!wan_isValidMacAddress(a)&&($("#ethernet_curr_mac_address").focus(),$("#ethernet_curr_mac_address").val(""),showErrorUnderTr("mac_error_msg",wlan_hint_mac_address_invalid),e=!1),e}function macReset(){clearAllErrorLabel(),getAjaxData("api/cradle/factory-mac",(function(e){var a=xml2object(e);"response"==a.type?(g_default_mac_address=a.response,$("#ethernet_curr_mac_address").val(g_default_mac_address.factorymac)):(showInfoDialog(common_failed),$("#ethernet_curr_mac_address").val(""))}),{sync:!0}),button_enable("apply_button","1")}function macClone(){clearAllErrorLabel(),host_MAC_Address=$("#ethernet_host_mac_address").val(),$.trim(host_MAC_Address).length<=0||($("#ethernet_curr_mac_address").val(host_MAC_Address),button_enable("apply_button","1"))}function macCloneApply(){if(isButtonEnable("apply_button")&&(clearAllErrorLabel(),macclone_checkMac())){var e=$.trim($("#ethernet_curr_mac_address").val()),a={currentmac:e};button_enable("apply_button","0");var r=object2xml("request",a);saveAjaxData("api/cradle/current-mac",r,(function(a){var r=xml2object(a);isAjaxReturnOK(r)?(button_enable("apply_button","0"),$("#ethernet_curr_mac_address").val(e),showInfoDialog(common_success)):(showInfoDialog(common_failed),macclone_initPage(),button_enable("apply","1"))}))}}$(document).ready((function(){button_enable("apply_button","0"),$("input").bind("change input paste cut keydown",(function(e){MACRO_KEYCODE!=e.keyCode&&button_enable("apply_button","1")})),macclone_initPage(),$("#reset_button").bind("click",macReset),$("#clone_button").bind("click",macClone),$("#apply_button").bind("click",macCloneApply)}));
