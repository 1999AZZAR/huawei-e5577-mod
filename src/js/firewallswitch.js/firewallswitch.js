var g_firewallSwitchData,isFirewallwanportpingswitch_enable=!1;function initPage(){getAjaxData("api/security/firewall-switch",(function(e){var l=xml2object(e);"response"==l.type&&(g_firewallSwitchData=l.response,$("#checkbox_FirewallMainSwitch").attr("checked",1==g_firewallSwitchData.FirewallMainSwitch),$("#checkbox_FirewallIPFilterSwitch").attr("checked",1==g_firewallSwitchData.FirewallIPFilterSwitch),$("#checkbox_FirewallWanPortPingSwitch").attr("checked",0==g_firewallSwitchData.FirewallWanPortPingSwitch),$("#checkbox_urlfilter").attr("checked",1==g_firewallSwitchData.firewallurlfilterswitch),g_module.fw_macfilter_enabled&&$("#checkbox_firewallmacfilterswitch").attr("checked",1==g_firewallSwitchData.firewallmacfilterswitch),checked_ck())})),setDisplay(),checkURLfilter()}function setDisplay(){g_module.fw_macfilter_enabled||$("#firewallmacfilter").remove(),getConfigData("config/webuicfg/config.xml",(function(e){"0"==_xml2feature(e).firewallwanportpingswitch_enable?$("#firewallWanPortPingSwitch").hide():$("#firewallWanPortPingSwitch").show()}))}function checkURLfilter(){checkLeftMenu(g_PageUrlTree.settings.security.urlfilter)?($("#firewallurlfilter").show(),$("#main_content_note").html(IDS_firewall_help_urlfilter)):($("#firewallurlfilter").hide(),$("#main_content_note").html(firewall_help_firewall_switch))}function apply(){if(clearAllErrorLabel(),isButtonEnable("apply_button")){button_enable("apply_button","0"),g_firewallSwitchData.FirewallMainSwitch=$("#checkbox_FirewallMainSwitch").get(0).checked?1:0,g_firewallSwitchData.FirewallIPFilterSwitch=$("#checkbox_FirewallIPFilterSwitch").get(0).checked?1:0,g_firewallSwitchData.FirewallWanPortPingSwitch=$("#checkbox_FirewallWanPortPingSwitch").get(0).checked?0:1,g_firewallSwitchData.firewallurlfilterswitch=$("#checkbox_urlfilter").get(0).checked?1:0,g_module.fw_macfilter_enabled&&(g_firewallSwitchData.firewallmacfilterswitch=$("#checkbox_firewallmacfilterswitch").get(0).checked?1:0);var e=object2xml("request",g_firewallSwitchData);saveAjaxData("api/security/firewall-switch",e,(function(e){var l=xml2object(e);isAjaxReturnOK(l)?(button_enable("apply_button","0"),showInfoDialog(common_success)):initPage()}))}}function checked_ck(){$("#checkbox_FirewallMainSwitch").get(0).checked&&($("#checkbox_FirewallIPFilterSwitch").removeAttr("disabled"),$("#checkbox_FirewallWanPortPingSwitch").removeAttr("disabled"),$("#checkbox_urlfilter").removeAttr("disabled"),g_module.fw_macfilter_enabled&&$("#checkbox_firewallmacfilterswitch").removeAttr("disabled"),$("#label_enable").css("color","#000000"),$("#label_disable").css("color","#000000")),$("#checkbox_FirewallMainSwitch").get(0).checked||($("#checkbox_FirewallIPFilterSwitch").attr("disabled","disabled"),$("#checkbox_FirewallWanPortPingSwitch").attr("disabled","disabled"),$("#checkbox_urlfilter").attr("disabled","disabled"),$("#checkbox_FirewallIPFilterSwitch").attr("checked",1==g_firewallSwitchData.FirewallIPFilterSwitch),$("#checkbox_FirewallWanPortPingSwitch").attr("checked",0==g_firewallSwitchData.FirewallWanPortPingSwitch),$("#checkbox_urlfilter").attr("checked",1==g_firewallSwitchData.firewallurlfilterswitch),g_module.fw_macfilter_enabled&&($("#checkbox_firewallmacfilterswitch").attr("disabled","disabled"),$("#checkbox_firewallmacfilterswitch").attr("checked",1==g_firewallSwitchData.firewallmacfilterswitch)),$("#label_enable").css("color","#baaaaa"),$("#label_disable").css("color","#baaaaa"))}$(document).ready((function(){button_enable("apply_button","0"),$("input[name='firewallswitch']").click((function(){button_enable("apply_button","1"),checked_ck()})),initPage()}));
