var UPDATE_STATUS_IDLE=10,UPDATE_STATUS_QUERYING=11,UPDATE_NEWVERSION_FOUND=12,UPDATE_STATUS_QUERYING_FAILED=13,UPDATE_UP_TO_DATE=14,UPDATE_DOWNLOAD_FAILED=20,UPDATE_DOWNLOAD_PROGRESSING=30,UPDATE_DOWNLOAD_PENDING=31,UPDATE_DOWNLOAD_COMPLETE=40,UPDATE_READYTO_UPDATE=50,UPDATE_START_UPDATE=52,UPDATE_PROGRESSING=60,UPDATE_FAILED_HAVEDATA=70,UPDATE_FAILED_NODATA=80,UPDATE_SUCCESSFUL_HAVEDATA=90,UPDATE_SUCCESSFUL_NODATA=100,RELOAD_PAGE_DELAY=600,UPDATE_STATUS_INTERVAL=1e3,ONLINE_UPDATE_STATUS_INTERVAL=1e4,UPDATE_STATUS_QUICK_INTERVAL=50,BATTERY_LESSTHAN_HALF="110024",g_status=null,g_update_value=null,g_updateComponent=null,g_TB=1099511627776,g_GB=1073741824,g_MB=1048576,g_KB=1024,g_install_processbar_enable=1,g_install_processbar_speed=1,g_install_progress=0,g_install_quick_flag=!0,g_install_quick_speed=1,g_download_install=!0,g_install_finshed=!1,g_progress_interval=null,g_updateStatus=0,g_force_update=!1,g_forceDownload="",g_click_update_flag=!1,g_checkUpdate_intervl="",g_oldAutoUpdateStatus="",g_oldManualUpdateStatus="",onceShowInstall_LowBattery=0;function reloadPage(){$("#div_wrapper,.update_dialog:visible").hide(),setTimeout((function(){window.location.reload()}),RELOAD_PAGE_DELAY)}function update_displayNoNewVersionInfo(){g_isBridgeNotesOpened||0!=$("#dialog:visible").length?$("#dialog:visible").length>0&&$("#div_wrapper").show():clearDialog(),$("#up_content").hide(),$("#up_version").hide(),$("#up_system").show()}function formatComponentSize(e){if("ar_sa"==LANGUAGE_DATA.current_language||"he_il"==LANGUAGE_DATA.current_language||"fa_fa"==LANGUAGE_DATA.current_language){if(e>=g_TB)return common_unit_tb+" "+formatFloat(parseFloat(e/g_TB),2);if(e>=g_GB&&e<g_TB)return common_unit_gb+" "+formatFloat(parseFloat(e/g_GB),2);if(e>=g_MB&&e<g_GB)return common_unit_mb+" "+formatFloat(parseFloat(e/g_MB),2);if(e>=g_KB&&e<g_MB)return common_unit_kb+" "+formatFloat(parseFloat(e/g_KB),2);if(e<g_KB)return common_unit_byte+" "+formatFloat(parseFloat(e/1),2)}else{if(e>=g_TB)return formatFloat(parseFloat(e/g_TB),2)+" "+common_unit_tb;if(e>=g_GB&&e<g_TB)return formatFloat(parseFloat(e/g_GB),2)+" "+common_unit_gb;if(e>=g_MB&&e<g_GB)return formatFloat(parseFloat(e/g_MB),2)+" "+common_unit_mb;if(e>=g_KB&&e<g_MB)return formatFloat(parseFloat(e/g_KB),2)+" "+common_unit_kb;if(e<g_KB)return formatFloat(parseFloat(e/1),2)+" "+common_unit_byte}}function update_showDownloading(){if(g_download_install){var current_progress=g_status.DownloadProgress,persent=formatFloat(parseInt(current_progress,10)/100,2),update_width=$(".graph").width()-8;if(update_width=parseInt(update_width*persent,10),$(".press").css({width:update_width+"px"}),"ar_sa"==LANGUAGE_DATA.current_language||"he_il"==LANGUAGE_DATA.current_language||"fa_fa"==LANGUAGE_DATA.current_language?$("#downloadProcess").html("%"+current_progress):"es_ar"==LANGUAGE_DATA.current_language||"es_es"==LANGUAGE_DATA.current_language?$("#downloadProcess").html(current_progress+" %"):$("#downloadProcess").html(current_progress+"%"),cancelLogoutTimer(),g_updateComponent){if("ar_sa"==LANGUAGE_DATA.current_language||"he_il"==LANGUAGE_DATA.current_language||"fa_fa"==LANGUAGE_DATA.current_language)var downloadProcess=get_label_get+"&nbsp;"+g_status.TotalComponents+of_label_of+eval(parseInt(g_status.CurrentComponentIndex,10)+1)+common_colon+"&nbsp;";else var downloadProcess=get_label_get+"&nbsp;"+eval(parseInt(g_status.CurrentComponentIndex,10)+1)+of_label_of+g_status.TotalComponents+common_colon+"&nbsp;";$.isArray(g_updateComponent)?downloadProcess+=XSSResolveCannotParseChar(newversion_label_newversion)+"&nbsp;"+formatComponentSize(g_updateComponent[g_status.CurrentComponentIndex].ComponentSize):downloadProcess+=newversion_label_newversion+"&nbsp;"+formatComponentSize(g_updateComponent.ComponentSize),$("#update_download .up_get").html(downloadProcess)}$("#div_wrapper").size()<1&&$(".body_bg").before("<div id='div_wrapper'><iframe   id='ifream_dialog'  src= '' frameborder= '0' style= 'background:#bcbcbc; width:100%; height:100%; display: block;'> </iframe></div>"),$(".update_dialog").hide(),reputPosition($("#update_download"),$("#div_wrapper")),disableTabKey(),current_progress==UPDATE_SUCCESSFUL_NODATA&&g_install_processbar_enable&&UPDATE_PROGRESSING==g_updateStatus&&(g_install_progress=0,g_download_install=!1,g_install_quick_flag=!0,$("#update_download .dialog_header_left").html(IDS_update_title_installing),$("#update_download .up_get").html(IDS_update_label_installing),$("#DownloadProgressing_Cancel").css("display","none"),clearTimeout(g_decive_timer),clearTimeout(g_simcard_timer),clearTimeout(g_heart_beat_timer),show_install_progress())}}function show_install_progress(){g_install_progress<100&&(g_install_progress+=g_updateStatus!=UPDATE_SUCCESSFUL_NODATA&&g_updateStatus!=UPDATE_SUCCESSFUL_HAVEDATA?g_install_processbar_speed:g_install_quick_speed,g_updateStatus==UPDATE_PROGRESSING&&g_install_progress>=100||g_updateStatus!=UPDATE_SUCCESSFUL_NODATA&&g_updateStatus!=UPDATE_SUCCESSFUL_HAVEDATA&&g_install_progress>=100?g_install_progress=99:g_install_progress>100&&(g_install_progress=100));var e=formatFloat(parseInt(g_install_progress,10)/100,2),t=$(".graph").width()-8;t=parseInt(t*e,10),$(".press").css({width:t+"px"}),"ar_sa"==LANGUAGE_DATA.current_language||"he_il"==LANGUAGE_DATA.current_language||"fa_fa"==LANGUAGE_DATA.current_language?$("#downloadProcess").html("%"+g_install_progress):"es_ar"==LANGUAGE_DATA.current_language||"es_es"==LANGUAGE_DATA.current_language?$("#downloadProcess").html(g_install_progress+" %"):$("#downloadProcess").html(g_install_progress+"%"),g_install_progress<100?(g_progress_interval=g_updateStatus==UPDATE_SUCCESSFUL_NODATA?setTimeout(show_install_progress,UPDATE_STATUS_QUICK_INTERVAL):setTimeout(show_install_progress,UPDATE_STATUS_INTERVAL),g_install_finshed=!1):(g_install_finshed=!0,setTimeout(update_downloadSuccess,UPDATE_STATUS_INTERVAL))}function update_displayNewVersionFoundInfo(e){$("#up_content").hide(),$("#up_version").show(),$("#up_system").hide(),$("#up_now").hide(),null==g_update_value?getAjaxData("api/online-update/url-list",(function(t){var a=xml2object(t);if("response"==a.type&&(g_update_value=a.response,g_forceDownload=a.response.forced_update_status,g_updateComponent=g_update_value.ComponentList.Component)){var o="",n=IDS_update_label_features+common_colon;$.isArray(g_updateComponent)?$.each(g_updateComponent,(function(e){o+="<tr><td width='100'>"+newversion_label_newversion+common_colon+"</td><td><label class='up_newversion'>"+XSSResolveCannotParseChar(g_updateComponent[e].Version)+"</label></td></tr><tr><td >"+sd_label_size+common_colon+"</td><td class = 'up_size'><label class='up_release'>"+formatComponentSize(g_updateComponent[e].ComponentSize)+"</label></td></tr>"})):o+="<tr><td width='100'>"+newversion_label_newversion+common_colon+"</td><td><label class='up_newversion'>"+XSSResolveCannotParseChar(g_updateComponent.Version)+"</label></td></tr><tr><td >"+sd_label_size+common_colon+"</td><td class = 'up_size'><label class='up_release'>"+formatComponentSize(g_updateComponent.ComponentSize)+"</label></td></tr>";var _=!0;$(t.find("language")).each((function(){$(this).attr("name")==LANGUAGE_DATA.current_language.replace(/_/,"-")&&(_=!1,$($(this).find("features").find("feature")).each((function(){n+="\n"+$(this).text()})))})),$(t.find("language")).each((function(){if(_){var e=t.find("default-language").attr("name");$(this).attr("name")==e&&$($(this).find("features").find("feature")).each((function(){n+="\n"+$(this).text()}))}})),$(".cancel_table").html(o),$(".update_textarea").html(n),e&&update_showDownloading()}})):e&&update_showDownloading()}function update_downloadSuccess(){g_updateStatus!=UPDATE_SUCCESSFUL_NODATA&&g_updateStatus!=UPDATE_SUCCESSFUL_HAVEDATA||(!g_install_processbar_enable||g_install_processbar_enable&&g_install_finshed)&&($(".update_dialog").hide(),reputPosition($("#upload_success"),$("#div_wrapper")))}function update_failed(){clearInterval(g_checkUpdate_intervl),$(".update_dialog").hide(),reputPosition($("#update_failed"),$("#div_wrapper"))}function update_battery_low(){clearInterval(g_checkUpdate_intervl),$(".update_dialog").hide(),reputPosition($("#update_battery_low"),$("#div_wrapper"))}function update_checkUpdateStatus(){getAjaxData("api/online-update/status",(function(e){var t=xml2object(e);"response"==t.type&&(g_status=t.response,g_updateStatus=parseInt(g_status.CurrentComponentStatus,10),""==g_oldManualUpdateStatus&&(g_oldManualUpdateStatus=g_updateStatus),update_processStatus(g_updateStatus))}),{errorCB:function(){setTimeout(update_checkUpdateStatus,ONLINE_UPDATE_STATUS_INTERVAL)}})}function update_checkUpdatingStatus(){g_click_update_flag||getAjaxData("api/online-update/status",(function(e){var t=xml2object(e);if("response"==t.type){g_status=t.response,g_updateStatus=parseInt(g_status.CurrentComponentStatus,10),""==g_oldAutoUpdateStatus&&(g_oldAutoUpdateStatus=g_updateStatus);var a=-1;void 0!==g_status.upgradetype&&(a=parseInt(g_status.upgradetype,10)),(g_updateStatus==UPDATE_UP_TO_DATE&&100==parseInt(g_status.DownloadProgress,10)&&0==a||g_updateStatus!=UPDATE_STATUS_QUERYING_FAILED&&g_updateStatus!=UPDATE_UP_TO_DATE&&g_updateStatus>=UPDATE_NEWVERSION_FOUND&&g_updateStatus<=UPDATE_SUCCESSFUL_NODATA&&0==a)&&($("#up_currentVersion").hide(),update_processingStatus(g_updateStatus))}}),{errorCB:function(){setTimeout(update_checkUpdatingStatus,ONLINE_UPDATE_STATUS_INTERVAL)}})}function update_processStatus(e){switch(getAjaxData("api/online-update/configuration",(function(e){var t=xml2object(e);"response"==t.type?g_force_update=void 0!==t.response.server_force_enable&&"1"==t.response.server_force_enable||(void 0!==t.response.server_force_enable&&t.response.server_force_enable,!1):"error"==t.type&&(g_force_update=!1)}),{errorCB:function(){g_force_update=!1},sync:!0}),e==UPDATE_DOWNLOAD_PROGRESSING&&parseInt(g_status.DownloadProgress,10)>0?g_force_update&&"1"==g_forceDownload||"1"==g_status.autodownload?($("#auto_download_prompt").show(),button_enable("DownloadProgressing_Cancel","0")):($("#auto_download_prompt").hide(),button_enable("DownloadProgressing_Cancel","1")):($("#auto_download_prompt").hide(),button_enable("DownloadProgressing_Cancel","0")),e){case UPDATE_STATUS_IDLE:$("#online_update").show(),$("#up_system").html(""),$("#online_update h2").hide(),update_displayNoNewVersionInfo();break;case UPDATE_STATUS_QUERYING:break;case UPDATE_NEWVERSION_FOUND:return $("#update_download").hide("fast"),0==$("#dialog:visible").length&&$("#div_wrapper").hide("fast"),update_displayNewVersionFoundInfo(),button_enable("update_now","1"),void("1"==g_autoDownload_flag&&(g_autoDownload_flag="0",$("#update_now").trigger("click")));case UPDATE_STATUS_QUERYING_FAILED:return"901"!=G_MonitoringStatus.response.ConnectionStatus&&"901"!=G_MonitoringStatus.response.WifiConnectionStatus&&$("#up_system").html(IDS_update_fail_no_internet),void update_displayNoNewVersionInfo();case UPDATE_UP_TO_DATE:return 100==parseInt(g_status.DownloadProgress,10)?($("#update_download,#div_wrapper").hide(),$("#up_currentVersion").hide(),$("#up_content").hide(),$("#up_version").hide(),$("#up_system").hide(),$("#up_now").show(),void $("#online_update h2").hide()):($("#up_system").html(IDS_update_latest_version),$("#online_update h2").hide(),void update_displayNoNewVersionInfo());case UPDATE_DOWNLOAD_FAILED:return"1"==g_status.updatebatterystatus?0==onceShowInstall_LowBattery?(clearInterval(g_checkUpdate_intervl),$(".update_dialog").hide(),onceShowInstall_LowBattery=1,showInfoDialog(IDS_update_battery_low_warning),$("#up_version").hide(),$("#up_currentVersion").show()):update_battery_low():(g_oldManualUpdateStatus!=UPDATE_DOWNLOAD_FAILED||g_oldManualUpdateStatus==UPDATE_DOWNLOAD_FAILED&&$("#update_download:visible").length>0)&&update_failed(),0==$("#up_version:visible").length&&$("#up_currentVersion").show(),void startLogoutTimer();case UPDATE_DOWNLOAD_PROGRESSING:update_displayNewVersionFoundInfo(!0),button_enable("update_now","0");break;case UPDATE_DOWNLOAD_PENDING:return update_displayNewVersionFoundInfo(),void button_enable("update_now","0");case UPDATE_DOWNLOAD_COMPLETE:case UPDATE_READYTO_UPDATE:break;case UPDATE_START_UPDATE:return $("#update_download,#div_wrapper").hide(),$("#up_now").show(),$("#online_update h2").hide(),void update_displayNoNewVersionInfo();case UPDATE_PROGRESSING:$("#auto_download_prompt").hide(),update_displayNewVersionFoundInfo(!0),button_enable("update_now","0");break;case UPDATE_FAILED_HAVEDATA:case UPDATE_FAILED_NODATA:return update_failed(),void startLogoutTimer();case UPDATE_SUCCESSFUL_HAVEDATA:case UPDATE_SUCCESSFUL_NODATA:return update_downloadSuccess(),void startLogoutTimer()}setTimeout(update_checkUpdateStatus,UPDATE_STATUS_INTERVAL)}function update_processingStatus(e){switch(getAjaxData("api/online-update/configuration",(function(e){var t=xml2object(e);"response"==t.type?g_force_update=void 0!==t.response.server_force_enable&&"1"==t.response.server_force_enable||(void 0!==t.response.server_force_enable&&t.response.server_force_enable,!1):"error"==t.type&&(g_force_update=!1)}),{errorCB:function(){g_force_update=!1},sync:!0}),e==UPDATE_DOWNLOAD_PROGRESSING&&parseInt(g_status.DownloadProgress,10)>0?g_force_update&&"1"==g_forceDownload||"1"==g_status.autodownload?($("#auto_download_prompt").show(),button_enable("DownloadProgressing_Cancel","0")):($("#auto_download_prompt").hide(),button_enable("DownloadProgressing_Cancel","1")):($("#auto_download_prompt").hide(),button_enable("DownloadProgressing_Cancel","0")),e){case UPDATE_STATUS_QUERYING:break;case UPDATE_NEWVERSION_FOUND:return $("#update_download").hide("fast"),0==$("#dialog:visible").length&&$("#div_wrapper").hide("fast"),update_displayNewVersionFoundInfo(),button_enable("update_now","1"),void("1"==g_autoDownload_flag&&(g_autoDownload_flag="0",$("#update_now").trigger("click")));case UPDATE_STATUS_QUERYING_FAILED:return"901"!=G_MonitoringStatus.response.ConnectionStatus&&"901"!=G_MonitoringStatus.response.WifiConnectionStatus&&$("#up_system").html(IDS_update_fail_no_internet),void update_displayNoNewVersionInfo();case UPDATE_UP_TO_DATE:return 100==parseInt(g_status.DownloadProgress,10)?($("#update_download,#div_wrapper").hide(),$("#up_currentVersion").hide(),$("#up_content").hide(),$("#up_version").hide(),$("#up_system").hide(),$("#up_now").show(),void $("#online_update h2").hide()):($("#up_system").html(IDS_update_latest_version),$("#online_update h2").hide(),void update_displayNoNewVersionInfo());case UPDATE_DOWNLOAD_FAILED:return"1"==g_status.updatebatterystatus?0==onceShowInstall_LowBattery?(clearInterval(g_checkUpdate_intervl),$(".update_dialog").hide(),onceShowInstall_LowBattery=1,showInfoDialog(IDS_update_battery_low_warning),$("#up_version").hide(),$("#up_currentVersion").show()):update_battery_low():(g_oldAutoUpdateStatus!=UPDATE_DOWNLOAD_FAILED||g_oldAutoUpdateStatus==UPDATE_DOWNLOAD_FAILED&&$("#update_download:visible").length>0)&&update_failed(),0==$("#up_version:visible").length&&$("#up_currentVersion").show(),void startLogoutTimer();case UPDATE_DOWNLOAD_PROGRESSING:update_displayNewVersionFoundInfo(!0),button_enable("update_now","0");break;case UPDATE_DOWNLOAD_PENDING:return update_displayNewVersionFoundInfo(),void button_enable("update_now","0");case UPDATE_DOWNLOAD_COMPLETE:case UPDATE_READYTO_UPDATE:break;case UPDATE_START_UPDATE:return $("#update_download,#div_wrapper").hide(),$("#up_now").show(),$("#online_update h2").hide(),void update_displayNoNewVersionInfo();case UPDATE_PROGRESSING:$("#auto_download_prompt").hide(),update_displayNewVersionFoundInfo(!0),button_enable("update_now","0");break;case UPDATE_FAILED_HAVEDATA:case UPDATE_FAILED_NODATA:return void($("#update_download:visible").length>0?(update_failed(),startLogoutTimer()):($("#up_version").hide(),$("#up_currentVersion").show()));case UPDATE_SUCCESSFUL_HAVEDATA:case UPDATE_SUCCESSFUL_NODATA:return void(0==$("#up_version:visible").length&&($("#up_version").hide(),$("#up_currentVersion").show()))}}function update_checkNewVersion(){$("#up_currentVersion").hide(),$("#up_content").show(),$("#up_version").hide(),$("#up_system").hide(),$("#up_now").hide(),saveAjaxData("api/online-update/check-new-version","",(function(e){update_checkUpdateStatus();var t=xml2object(e);isAjaxReturnOK(t)}))}function update_onClickUpdateNow(){var e=parseInt(G_NotificationsStatus.OnlineUpdateStatus,10);if(e!=UPDATE_DOWNLOAD_PROGRESSING&&e!=UPDATE_PROGRESSING&&e!=UPDATE_UP_TO_DATE){clearAllErrorLabel(),$("#update_now").unbind("click");var t=object2xml("request",{userAckNewVersion:0});saveAjaxData("api/online-update/ack-newversion",t,(function(e){var t=xml2object(e);if("response"==t.type)update_checkUpdateStatus(),g_download_install=!0;else if("error"==t.type&&t.error.code==BATTERY_LESSTHAN_HALF)return g_coulometer_status,void showInfoDialog(STRID_update_hint_battery_prower_low)}))}else"1"==g_autoUpdate_flag?update_checkUpdateStatus():getAjaxData("api/online-update/status",(function(e){var t=xml2object(e);"response"==t.type&&(g_status=t.response,(g_updateStatus=parseInt(g_status.CurrentComponentStatus,10))!=UPDATE_NEWVERSION_FOUND&&(clearAllErrorLabel(),showErrorUnderTextbox("update_now",IDS_update_updateing_try_again)))}))}function update_okDownloading(){isButtonEnable("DownloadProgressing_Cancel")&&($("#update_download,#div_wrapper").hide(),saveAjaxData("api/online-update/cancel-downloading","",(function(e){xml2object(e).type}),{sync:!0}),saveAjaxData("api/online-update/check-new-version","",(function(e){var t=xml2object(e);isAjaxReturnOK(t)}),{sync:!0}),reloadPage())}var g_autoUpdate_flag="",g_autoDownload_flag="";function getUpdateConfig(){getConfigData("config/webuicfg/config.xml",(function(e){var t=_xml2feature(e);g_install_processbar_enable=t.install_processbar_enable,g_install_processbar_speed=t.install_processbar_speed}),{sync:!0}),getAjaxData("api/online-update/autoupdate-config",(function(e){var t=xml2object(e);"response"==t.type&&(g_autoUpdate_flag=t.response.auto_update,g_autoDownload_flag=t.response.ui_download)}),{sync:!0})}function createCanvas(e,t){var a=$("#"+e+" span:eq(1) a");if($.browser.msie&&parseInt($.browser.version,10)<9)$(".dialog_header_left").css("margin-top","5"),$(".dialog_header_right").css("margin-top","5"),$(".dialog_header").css({width:"500px",height:"29px"}),$(".dialog_header").corner("top 5px"),$(".dialog_table_bottom").corner("keep round br bl 3px cc:6a6a6a"),a.append("<img src='../res/new_del.png' title='' alt='' />"),a.css("margin-top","-12px");else{var o="<canvas id='"+t+"' width='25px' height='25px'></canvas>";a.append(o);var n=document.getElementById(t);draw(n)}}function update_executeBeforeDocumentReady(){getAjaxData("api/monitoring/status",(function(e){var t=xml2object(e);"response"==t.type&&(G_MonitoringStatus=t)}),{sync:!0}),g_module.cradle_enabled&&getAjaxData("api/cradle/status-info",(function(e){var t=xml2object(e);"response"==t.type&&(G_cradleStationStatus=t.response)}),{sync:!0}),(WIFI_CONNECTED==G_MonitoringStatus.response.WifiConnectionStatus||g_module.cradle_enabled&&CRADLE_NETLINE_EXIST==G_cradleStationStatus.cradlestatus&&G_cradleStationStatus.connectionmode!=ETHERNET_LAN_MODE&&G_cradleStationStatus.connectstatus!=MACRO_CRADLE_CONNECTSTATUSNULL&&G_cradleStationStatus.connectstatus!=MACRO_CRANDLE_CONNECTSTATUSERRO||!redirectOnCondition(null,"update"))&&("1"!=g_needToLogin||g_not_need_login_update||checklogin()),getUpdateConfig()}function initPage(){g_not_need_login_update?getAjaxData("api/device/basic_information",(function(e){var t=xml2object(e);"response"==t.type&&(""!=t.response.SoftwareVersion&&void 0!==t.response.SoftwareVersion?$(".software_version").text(t.response.SoftwareVersion):$(".software_version").text(common_unknown),""!=t.response.WebUIVersion&&void 0!==t.response.WebUIVersion?$(".ui_version").text(t.response.WebUIVersion):$(".ui_version").text(common_unknown))}),{sync:!0}):getAjaxData("api/device/information",(function(e){var t=xml2object(e);"response"==t.type&&(""!=t.response.SoftwareVersion&&void 0!==t.response.SoftwareVersion?$(".software_version").text(t.response.SoftwareVersion):$(".software_version").text(common_unknown),""!=t.response.WebUIVersion&&void 0!==t.response.WebUIVersion?$(".ui_version").text(t.response.WebUIVersion):$(".ui_version").text(common_unknown))}),{sync:!0}),"-1"==g_coulometer_status&&getAjaxData("api/device/device-feature-switch",(function(e){var t=xml2object(e);"response"==t.type&&(g_coulometer_status=t.response.coulometer_enabled)}),{sync:!0}),IDS_update_battery_low_warning=coulometerCheck(IDS_update_battery_low_warning),STRID_update_hint_battery_prower_low=coulometerCheck(STRID_update_hint_battery_prower_low),$("#battery_low_replace").text(IDS_update_battery_low_warning)}function update_onClickInstallNow(){var e=parseInt(G_NotificationsStatus.OnlineUpdateStatus,10);if(e!=UPDATE_DOWNLOAD_PROGRESSING&&e!=UPDATE_PROGRESSING){clearAllErrorLabel(),$("#install_now").unbind("click");var t=object2xml("request",{UserAckUpdate:0});saveAjaxData("api/online-update/ack-readytoupdate",t,(function(e){var t=xml2object(e);"response"==t.type?(update_checkUpdateStatus(),g_download_install=!0):"error"==t.type&&t.error.code==BATTERY_LESSTHAN_HALF&&showInfoDialog(STRID_update_hint_battery_prower_low)}))}else showInfoDialog(IDS_update_updateing_try_again)}function checkNewVersionForAutoClick(){g_module.online_update_enabled&&(null==G_NotificationsStatus?setTimeout(checkNewVersionForAutoClick,50):MACRO_NEWVERSIONFOUND!=G_NotificationsStatus.OnlineUpdateStatus&&MACRO_READYTOUPDATE!=G_NotificationsStatus.OnlineUpdateStatus||$("#check_now").trigger("click"))}update_executeBeforeDocumentReady(),$(document).ready((function(){initPage(),checkNewVersionForAutoClick(),setTimeout((function(){null!=getQueryStringByName("mode")&&"local"==getQueryStringByName("mode").toLowerCase()||(update_checkUpdatingStatus(),g_checkUpdate_intervl=setInterval(update_checkUpdatingStatus,UPDATE_STATUS_INTERVAL))}),50),$("#check_now").live("click",(function(){isButtonEnable("check_now")&&update_checkNewVersion()})),$("#update_now").live("click",(function(){isButtonEnable("update_now")&&(g_click_update_flag=!0,update_onClickUpdateNow())})),$("#install_now").live("click",(function(){isButtonEnable("install_now")&&update_onClickInstallNow()})),$("#DownloadProgressing_Cancel").bind("click",update_okDownloading),$("#query_again").bind("click",(function(){update_checkNewVersion()})),$(".dialog_close_btn, .pop_Cancel").live("click",(function(){reloadPage()})),$("#success_ok").live("click",(function(){$("#upload_success,#div_wrapper").hide(),reloadPage()}))}));
