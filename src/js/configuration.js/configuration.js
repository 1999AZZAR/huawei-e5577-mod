function doSubmit(){document.forms[0].submit()}function gotoLoginWhileSystemUp(){var e="";getAjaxData("api/dhcp/settings",(function(t){var o=xml2object(t);"response"==o.type&&(e=o.response.DhcpIPAddress)}),{sync:!0}),ping_setPingAddress(e),setTimeout(startPing,1),closeWaitingDialog()}function restore(){cancelLogoutTimer();var e=new Date,t={Year:e.getFullYear(),Month:e.getMonth()+1,Day:e.getDate(),Hour:e.getHours(),Min:e.getMinutes(),Sec:e.getSeconds()};if($.isArray(g_requestVerificationToken)){if(!(g_requestVerificationToken.length>0))return void setTimeout((function(){restore()}),50);$("#csrf_token").val("csrf:"+g_requestVerificationToken[0])}$("#cur_path").val($("#restore_file").val()),$("#page").val("configuration.html"),$("#upload_year").val(t.Year),$("#upload_month").val(t.Month),$("#upload_day").val(t.Day),$("#upload_hours").val(t.Hour),$("#upload_minutes").val(t.Min),$("#upload_secondes").val(t.Sec),$("#randomNum").val(Math.round(1e4*Math.random())),showWaitingDialog(common_waiting,sd_hint_wait_a_few_moments),setTimeout((function(){gotoLoginWhileSystemUp()}),6e4),setTimeout(doSubmit,20)}$((function(){var e=getQueryStringByName("result");"error"==e?showInfoDialog(common_failed):"success"==e&&(cancelLogoutTimer(),showWaitingDialog(common_waiting,sd_hint_wait_a_few_moments),setTimeout((function(){gotoLoginWhileSystemUp()}),3e4)),$("#save_button").bind("click",(function(){if(isButtonEnable("save_button")){showWaitingDialog(common_waiting,sd_hint_wait_a_few_moments);var e=object2xml("request",{Control:3});saveAjaxData("api/device/control",e,(function(e){var t=xml2object(e);isAjaxReturnOK(t)?(closeWaitingDialog(),window.location.href="../../nvram.bak"):(closeWaitingDialog(),showInfoDialog(common_failed))}))}})),button_enable("restore_button","0"),$("#restore_file").bind("change",(function(){button_enable("restore_button","0");var e=this.value;0==e.length?(clearAllErrorLabel(),$("#restore_button").unbind("click")):/\.bak$/i.test(e)?(button_enable("restore_button","1"),clearAllErrorLabel(),$("#restore_button").bind("click",(function(){showConfirmDialog(system_hint_operation_restart_device,restore,(function(){}))}))):(clearAllErrorLabel(),button_enable("restore_button","0"),showErrorUnderTextbox("restore_file",system_hint_file_name_empty),$("#restore_button").unbind("click"))}))}));
