var WANLMACFILTER_FILTER_STATUS_DISABLED=0,WANLMACFILTER_FILTER_STATUS_ALLOW=1,WANLMACFILTER_FILTER_STATUS_DENY=2,g_MacfilterData=[],DOUBLE_CHIP=1;function showData(i){$("#ssid_input_WifiMacFilterMac0").val(g_MacfilterData[0].WifiMacFilterMac0),$("#ssid_input_WifiMacFilterMac1").val(g_MacfilterData[0].WifiMacFilterMac1),$("#ssid_input_WifiMacFilterMac2").val(g_MacfilterData[0].WifiMacFilterMac2),$("#ssid_input_WifiMacFilterMac3").val(g_MacfilterData[0].WifiMacFilterMac3),$("#ssid_input_WifiMacFilterMac4").val(g_MacfilterData[0].WifiMacFilterMac4),$("#ssid_input_WifiMacFilterMac5").val(g_MacfilterData[0].WifiMacFilterMac5),$("#ssid_input_WifiMacFilterMac6").val(g_MacfilterData[0].WifiMacFilterMac6),$("#ssid_input_WifiMacFilterMac7").val(g_MacfilterData[0].WifiMacFilterMac7),$("#ssid_input_WifiMacFilterMac8").val(g_MacfilterData[0].WifiMacFilterMac8),$("#ssid_input_WifiMacFilterMac9").val(g_MacfilterData[0].WifiMacFilterMac9),$("#ssid_select_service").val(g_MacfilterData[0].WifiMacFilterStatus),wlanmacfilter_ssid_setDisabled()}function getSSIDStatus(){""==g_wifiFeatureSwitch&&getAjaxData("api/wlan/wifi-feature-switch",(function(i){var a=xml2object(i);"response"==a.type&&(g_wifiFeatureSwitch=a.response)}),{sync:!0})}function initPage(){null!=g_wifiFeatureSwitch&&""!=g_wifiFeatureSwitch?getAjaxData("api/wlan/multi-macfilter-settings",(function(i){var a=xml2object(i);"response"==a.type&&(g_MacfilterData=CreateArray(a.response.Ssids.Ssid))}),{sync:!0}):g_module.multi_ssid_enabled?getAjaxData("api/wlan/multi-basic-settings",(function(i){var a=xml2object(i);"response"==a.type&&(g_MacfilterData=CreateArray(a.response.Ssids.Ssid))}),{sync:!0}):getAjaxData("api/wlan/mac-filter",(function(i){var a=xml2object(i);"response"==a.type&&(g_MacfilterData=CreateArray(a.response))}),{sync:!0}),showData()}function wlanmacfilter_ssid_setDisabled(){$("#ssid_select_service").val()==WANLMACFILTER_FILTER_STATUS_DISABLED?(clearData(),$("#ssid_mac_list :input").attr("disabled","disabled")):$("#ssid_mac_list :input").removeAttr("disabled")}function clearData(){$("#ssid_mac_list :input").val("")}function getData(){var i=0,a=$("#ssid_select_service").val();if(WANLMACFILTER_FILTER_STATUS_DISABLED==$("#ssid_select_service").val())for(;i<g_MacfilterData.length;i++)g_MacfilterData[i].WifiMacFilterMac0="",g_MacfilterData[i].WifiMacFilterMac1="",g_MacfilterData[i].WifiMacFilterMac2="",g_MacfilterData[i].WifiMacFilterMac3="",g_MacfilterData[i].WifiMacFilterMac4="",g_MacfilterData[i].WifiMacFilterMac5="",g_MacfilterData[i].WifiMacFilterMac6="",g_MacfilterData[i].WifiMacFilterMac7="",g_MacfilterData[i].WifiMacFilterMac8="",g_MacfilterData[i].WifiMacFilterMac9="",g_MacfilterData[i].WifiMacFilterStatus=a;else for(;i<g_MacfilterData.length;i++)g_MacfilterData[i].WifiMacFilterMac0=$.trim($("#ssid_input_WifiMacFilterMac0").val()),g_MacfilterData[i].WifiMacFilterMac1=$.trim($("#ssid_input_WifiMacFilterMac1").val()),g_MacfilterData[i].WifiMacFilterMac2=$.trim($("#ssid_input_WifiMacFilterMac2").val()),g_MacfilterData[i].WifiMacFilterMac3=$.trim($("#ssid_input_WifiMacFilterMac3").val()),g_MacfilterData[i].WifiMacFilterMac4=$.trim($("#ssid_input_WifiMacFilterMac4").val()),g_MacfilterData[i].WifiMacFilterMac5=$.trim($("#ssid_input_WifiMacFilterMac5").val()),g_MacfilterData[i].WifiMacFilterMac6=$.trim($("#ssid_input_WifiMacFilterMac6").val()),g_MacfilterData[i].WifiMacFilterMac7=$.trim($("#ssid_input_WifiMacFilterMac7").val()),g_MacfilterData[i].WifiMacFilterMac8=$.trim($("#ssid_input_WifiMacFilterMac8").val()),g_MacfilterData[i].WifiMacFilterMac9=$.trim($("#ssid_input_WifiMacFilterMac9").val()),g_MacfilterData[i].WifiMacFilterStatus=a}function setData(){$("#ssid_input_WifiMacFilterMac0").val(g_MacfilterData[0].WifiMacFilterMac0),$("#ssid_input_WifiMacFilterMac1").val(g_MacfilterData[0].WifiMacFilterMac1),$("#ssid_input_WifiMacFilterMac2").val(g_MacfilterData[0].WifiMacFilterMac2),$("#ssid_input_WifiMacFilterMac3").val(g_MacfilterData[0].WifiMacFilterMac3),$("#ssid_input_WifiMacFilterMac4").val(g_MacfilterData[0].WifiMacFilterMac4),$("#ssid_input_WifiMacFilterMac5").val(g_MacfilterData[0].WifiMacFilterMac5),$("#ssid_input_WifiMacFilterMac6").val(g_MacfilterData[0].WifiMacFilterMac6),$("#ssid_input_WifiMacFilterMac7").val(g_MacfilterData[0].WifiMacFilterMac7),$("#ssid_input_WifiMacFilterMac8").val(g_MacfilterData[0].WifiMacFilterMac8),$("#ssid_input_WifiMacFilterMac9").val(g_MacfilterData[0].WifiMacFilterMac9),setTimeout((function(){$("#ssid_select_service").val(g_MacfilterData[0].WifiMacFilterStatus)}),1)}function wlanmacfilter_isValidMacAddress(i){var a=0,t=0,e=0;if("ff:ff:ff:ff:ff:ff"==(i=(i=$.trim(i)).toLowerCase())||"00:00:00:00:00:00"==i)return!1;var l=i.split(":");if(6!=l.length)return!1;for(t=0;t<6;t++){if(2!=l[t].length)return!1;for(e=0;e<l[t].length;e++)if(!((a=l[t].charAt(e))>="0"&&a<="9"||a>="a"&&a<="f"))return!1}return!((a=parseInt(l[0].charAt(1),16))%2)}function wlanmacfilert_checkAllMac(){var i=!0,a=0;if($("#ssid_mac_list :input").each((function(t){$.trim($(this).val()).length>0&&!wlanmacfilter_isValidMacAddress($(this).val())||0==$.trim($(this).val()).length&&$(this).val().length>0?($(this).focus(),showErrorUnderTextbox("ssid_input_WifiMacFilterMac"+t,wlan_hint_mac_address_invalid),i=!1):0==$(this).val().length&&a++})),10==a){var t=$("#ssid_select_service").val();WANLMACFILTER_FILTER_STATUS_DISABLED!=t&&(showInfoDialog(wlan_hint_mac_address_invalid),$.browser.msie||$("#ssid_input_WifiMacFilterMac0").focus(),i=!1)}return i}function wlanmacfilert_onApply(){clearAllErrorLabel(),wlanmacfilert_checkAllMac()&&showConfirmDialog(firewall_hint_submit_list_item,postData,(function(){}))}function postData(){var i=null,a="";getData(),null!=g_wifiFeatureSwitch&&""!=g_wifiFeatureSwitch?(a="api/wlan/multi-macfilter-settings",i={Ssids:{Ssid:g_MacfilterData}}):g_module.multi_ssid_enabled?(a="api/wlan/multi-basic-settings",i={Ssids:{Ssid:g_MacfilterData},WifiRestart:1}):(a="api/wlan/mac-filter",i=g_MacfilterData[0]);var t=object2xml("request",i);button_enable("apply","0"),saveAjaxData(a,t,(function(i){var a=xml2object(i);isAjaxReturnOK(a)?($("#macfilter_input").hide(),initPage(),showInfoDialog(common_success),button_enable("apply","0")):void 0!==a.error&&a.error.code==ERROR_SYSTEM_BUSY?showInfoDialog(common_system_busy):showInfoDialog(common_fail)}))}function getOffloadStatus(){getAjaxData("api/wlan/handover-setting",(function(i){var a=xml2object(i);"response"==a.type&&(g_wlan_handover="2"==a.response.Handover)}))}function checkRepeat(){clearAllErrorLabel();for(var i=[],a="",t=!0,e=0;e<10;e++)a=$.trim($("#ssid_input_WifiMacFilterMac"+e).val()).toLowerCase(),i.push(a);for(e=0;e<i.length;e++)for(var l=e+1;l<i.length;l++){var c=i[e],r=i[l];if(c==r&&c.length>0&&r.length>0)return showErrorUnderTextbox("ssid_input_WifiMacFilterMac"+l,wlan_label_mac_address_exist),$("#ssid_input_WifiMacFilterMac"+l).focus(),void(t=!1)}return t}$(document).ready((function(){button_enable("apply","0"),$("#ssid_mac_list :input").val(""),$("#ssid_mac_list :input").removeAttr("disabled"),getSSIDStatus(),initPage(),$("#ssid_mac_list :input").bind("input change cut paste keydown",(function(i){MACRO_KEYCODE!=i.keyCode&&button_enable("apply","1")})),$("#apply").click((function(){isButtonEnable("apply")&&checkRepeat()&&wlanmacfilert_onApply()})),$("#ssid_select_service").bind("change",(function(){var i=$("#ssid_select_service").val();wlanmacfilter_ssid_setDisabled(),$(".error_message").remove(),i==g_MacfilterData[0].WifiMacFilterStatus?(setData(),button_enable("apply","0")):(clearData(),button_enable("apply","1"))})),null!=g_wifiFeatureSwitch||g_module.multi_ssid_enabled?getAjaxData("api/wlan/multi-basic-settings",(function(i){var a=xml2object(i),t=0;if("response"==a.type){var e=(t=CreateArray(a.response.Ssids.Ssid)).length/2;null!=g_wifiFeatureSwitch&&g_wifiFeatureSwitch.isdoublechip==DOUBLE_CHIP&&"1"==g_wifiFeatureSwitch.wifi24g_switch_enable?(0==t[0].WifiEnable&&0==t[e].WifiEnable||0==t[0].wifitotalswitch)&&(showInfoDialog(IDS_wlan_off),$("select:not(#lang)").attr("disabled","disabled"),$("input:not(#lang)").attr("disabled","disabled")):0==t[0].WifiEnable&&($("input:not(#lang)").attr("disabled",!0),$("select:not(#lang)").attr("disabled",!0),showInfoDialog(IDS_wlan_off))}}),{sync:!0}):getAjaxData("api/wlan/basic-settings",(function(i){var a=xml2object(i);"response"==a.type&&(0==CreateArray(a.response)[0].WifiEnable&&(showInfoDialog(IDS_wlan_off),$("input:not(#lang)").attr("disabled",!0),$("select:not(#lang)").attr("disabled",!0)))}),{sync:!0})}));
