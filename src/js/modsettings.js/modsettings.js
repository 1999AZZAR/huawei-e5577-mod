function initPageData(){void 0!==modsettings.fix_ttl&&modsettings.fix_ttl.length>0&&delete user_config.fix_ttl;var t="";getAjaxData("devicename.cgi",(function(e){var o=xml2object(e);"response"==o.type&&null!=o.response.DeviceName&&(t=o.response.DeviceName)}),{sync:!0}),getAjaxData("platform.cgi",(function(t){var e=xml2object(t);"response"==e.type&&(-1!=e.response.platform.indexOf("V7R11")||-1!=e.response.platform.indexOf("V711")||-1!=e.response.platform.indexOf("V7R2")||-1!=e.response.platform.indexOf("V72")?($("#autoswitch").find('option[value="5"]').remove(),$("#backup_imei").find('option[value="nvbackup"], option[value="factory-nvbackup"]').remove()):"Unknown"==e.response.platform&&($("#autoswitch").find('option[value="3"], option[value="4"]').remove(),$("#backup_imei").find('option[value="inforbu"], option[value="factory-inforbu"], option[value="backup_imei"]').remove()))}),{sync:!0}),getAjaxData("api/device/information",(function(e){var o=xml2object(e);"response"==o.type&&(""!=t&&(o.response.DeviceName=t),-1!=o.response.DeviceName.indexOf("E3372S")&&($("#tr_autoswitch").attr("id","tr_e3372s_autoswitch"),$("#autoswitch").attr("id","e3372s_autoswitch"),$("#e3372s_autoswitch").find('option[value="1"]').text(modsettings_label_autoswitch_modes_debug_rndis),$("#e3372s_autoswitch").find('option[value="2"]').text(modsettings_label_autoswitch_modes_debug_cdc),$("#e3372s_autoswitch").find('option[value="3"]').text(modsettings_label_autoswitch_modes_first_composition),$("#e3372s_autoswitch").find('option[value="4"]').remove(),void 0!==modsettings.autoswitch&&(modsettings.e3372s_autoswitch=modsettings.autoswitch,delete modsettings.autoswitch)),""==modsettings.serial_number&&(modsettings.serial_number=o.response.SerialNumber),""==modsettings.imei&&(modsettings.imei=o.response.Imei),""==modsettings.msisdn&&(modsettings.msisdn=o.response.Msisdn))}),{sync:!0}),""==modsettings.imei_generator?getIMEIGenerator(user_config.imei_generator_model,(function(t){modsettings.imei_generator=t,getModSettingsData("modsettings",modsettings),getModSettingsData("user_config",user_config)})):(getModSettingsData("modsettings",modsettings),getModSettingsData("user_config",user_config))}function getIMEIGenerator(t,e){$.ajax({type:"GET",url:"http://"+location.hostname+":5080/cgi-bin/imei_generator.cgi?"+t,success:function(t,o,i){void 0!==t.response&&void 0!==t.response.imei_generator&&"function"==typeof e&&e(t.response.imei_generator)},dataType:"json"})}function postData(){button_enable("apply_button","0"),setModSettings(modsettings),applyModSettings((function(t,e,o){isAjaxReturnOK(t)?showWaitingDialog(common_waiting,sd_hint_wait_a_few_moments,(function(){})):(showInfoDialog(common_failed),initPageData())}))}function apply(){isButtonEnable("apply_button")&&showConfirmDialog(system_hint_operation_restart_device,postData,(function(){}))}$(document).ready((function(){initPageData(),$("#imei_generator_model").live("change input paste cut keyup",(function(t){MACRO_KEYCODE!=t.keyCode&&getIMEIGenerator($(this).val(),(function(t){modsettings.imei_generator=t,$("#imei_generator").val(t)}))})),button_enable("apply_button","0"),$("#apply_button").click((function(){apply()}))}));
