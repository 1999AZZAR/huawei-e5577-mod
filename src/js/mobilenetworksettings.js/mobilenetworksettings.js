var SETTING_DIALUP_MACRO_INVALID_SIM_CARD="0",SETTING_DIALUP_AUTO_SEARCH_NET=0,SETTING_DIALUP_MANUAL_SEARCH_NET=1,SETTING_DIALUP_RAT_2G=0,SETTING_DIALUP_RAT_3G=2,SETTING_DIALUP_RAT_4G=7,SETTING_DIALUP_PLMN=null,DEFAULT_DEVICE_NAME="default",AUTO_MODE="0",NW_NULL_STRING="",OLDINTERFACE=0,NEWINTERFACE=1,PLMN_USABLE="1",PLMN_REGISTERED="2",PLMN_FORBIDDEN="3",networkband_enable=!0,networksearch_enable=!0,g_netsearchresponse=!0,networksearch_hide=!1,g_setting_netWork={NetworkMode:null,NetworkBand:null},g_networkband={NetworkBands:null},g_setting_register={Mode:null,Plmn:null,Rat:null},autoFlag=!1,AUTO=[0,common_auto],GSM_ONLY=[1,dialup_label_2g_only],WCDMA_ONLY=[2,dialup_label_3g_only],GSM_PRE=[3,dialup_label_2g_preferred],WCDMA_PRE=[4,dialup_label_3g_preferred],LTE_only=[5,dialup_label_4g_only],LTE_PRE=[6,dialup_label_4g_preferred],NETWORKMODES={0:common_auto,1:dialup_label_2g_only,2:dialup_label_3g_only,3:dialup_label_2g_preferred,4:dialup_label_3g_preferred,5:dialup_label_4g_only},g_networknodes={0:common_auto,1:"GSM",2:"UMTS",3:"LTE",4:plmn_label_2g,5:plmn_label_3g,6:plmn_label_3g,7:plmn_label_3g},g_NetworkNodesFlag={0:common_auto,1:plmn_label_2g,2:plmn_label_3g,3:plmn_label_4g,4:plmn_label_2g,5:plmn_label_3g,6:plmn_label_3g,7:plmn_label_3g},g_compoundnetworknodes={1:"GSM",2:"UMTS",3:"LTE",4:"CDMA 1X",5:"TD-SCDMA",6:"Wimax",7:"EVDO"},g_net_mode_enable=OLDINTERFACE,g_network_list_empty=1,g_setting_netWorkModeListIndex=[],g_setting_netWorkModeList=[[0,NETWORKMODES[0]],[1,NETWORKMODES[1]],[2,NETWORKMODES[2]]],G850G1900=2621440,GSM1900=2097152,GSM1800=128,GSM900=768,GSM850=524288,W850W1900=75497472,W2100=4194304,W1900=8388608,W850=67108864,W900=562949953421312,g_arrNetworkBand=[];g_arrNetworkBand.push([128,Label_CM_BAND_PREF_GSM_DCS_1800]),g_arrNetworkBand.push([768,Label_CM_BAND_PREF_GSM_900]),g_arrNetworkBand.push([2097152,Label_CM_BAND_PREF_GSM_PCS_1900]),g_arrNetworkBand.push([4194304,Label_CM_BAND_PREF_WCDMA_I_IMT_2000]),g_arrNetworkBand.push([8388608,Label_CM_BAND_PREF_WCDMA_1900]),g_arrNetworkBand.push([67108864,Label_CM_BAND_PREF_WCDMA_850]),g_arrNetworkBand.push([1073741824,Label_CM_BAND_PREF_NO_CHANGE]),g_arrNetworkBand.push([0x4000000000000,Label_CM_BAND_PREF_WCDMA_IX_1700]),g_arrNetworkBand.push([562949953421312,Label_CM_BAND_PREF_WCDMA_900]),g_arrNetworkBand.push([524288,Label_CM_BAND_PREF_GSM_850]),g_arrNetworkBand.push([1,Label_CM_BAND_PREF_BC0_A]),g_arrNetworkBand.push([2,Label_CM_BAND_PREF_BC0_B]),g_arrNetworkBand.push([4,Label_CM_BAND_PREF_BC1]),g_arrNetworkBand.push([8,Label_CM_BAND_PREF_BC2]),g_arrNetworkBand.push([16,Label_CM_BAND_PREF_BC3]),g_arrNetworkBand.push([32,Label_CM_BAND_PREF_BC4]),g_arrNetworkBand.push([64,Label_CM_BAND_PREF_BC5]),g_arrNetworkBand.push([1024,Label_CM_BAND_PREF_BC6]),g_arrNetworkBand.push([2048,Label_CM_BAND_PREF_BC7]),g_arrNetworkBand.push([4096,Label_CM_BAND_PREF_BC8]),g_arrNetworkBand.push([8192,Label_CM_BAND_PREF_BC9]),g_arrNetworkBand.push([16384,Label_CM_BAND_PREF_BC10]),g_arrNetworkBand.push([32768,Label_CM_BAND_PREF_BC11]),g_arrNetworkBand.push([268435456,Label_CM_BAND_PREF_BC12]),g_arrNetworkBand.push([536870912,Label_CM_BAND_PREF_BC14]),g_arrNetworkBand.push([2147483648,Label_CM_BAND_PREF_BC15]);var vsim_status=0;function transactionEnd(){button_enable("mobilensetting_apply","1"),g_netsearchresponse=!0}function IsCDMAorAUTO(e){0!=networksearch_enable&&MACRO_NET_SINGLE_MODE!=g_net_mode_type&&(networksearch_hide=!1,OLDINTERFACE==g_net_mode_enable?AUTO_MODE==e&&(networksearch_hide=!0):NEWINTERFACE==g_net_mode_enable&&(null==e.match(/4|7/)&&AUTO_MODE!=e||(networksearch_hide=!0)),1==networksearch_hide?($("#networksearch h2").hide(),$("#networksearch table").hide()):($("#networksearch h2").show(),$("#networksearch table").show()))}function setting_dialup_getNetworkBand(e){var t="",n=[];getConfigData("config/network/networkband_"+e+".xml",(function(e){var _=xml2object(e);"config"==_.type&&(g_networkband.NetworkBands=_.config.NetworkBands.Band,jQuery.each(g_networkband.NetworkBands,(function(e,t){var _=getBandString(parseInt(t,10));n[e]=[],n[e].push(t),n[e].push(_),_.length>0&&g_setting_netWork.NetworkBand==t&&$("#band_select").val(_)})),$.each(n,(function(e,n){t="<option value = "+n[0]+">"+n[1]+"</option>",$("#band_select").append(t)})))}),{sync:!0})}function setNetWork(){getAjaxData("api/net/net-mode",(function(e){var t=xml2object(e);if("response"==t.type){g_setting_netWork.NetworkMode=parseInt(t.response.NetworkMode,10),IsCDMAorAUTO(NW_NULL_STRING+g_setting_netWork.NetworkMode),g_setting_netWork.NetworkBand=t.response.NetworkBand,g_setting_netWork.LTEBand=t.response.LTEBand,initBandSel();var n=0,_=!1;for(n=0;n<g_setting_netWorkModeList.length;n++)if(g_setting_netWork.NetworkMode==g_setting_netWorkModeList[n][0]){$("#preferred_mode_select").val(g_setting_netWork.NetworkMode),_=!0;break}0==_&&$("#preferred_mode_select").val(g_setting_netWorkModeList[0][0]);var o=0;for(o=0;o<g_setting_netWorkModeList.length;o++)0==g_setting_netWorkModeList[o][o]&&(autoFlag=!0);autoFlag&&0!=$("#preferred_mode_select").val()?$("#mobile_network_note").show():$("#mobile_network_note").hide()}}),{errorCB:function(){}})}function setting_dialup_initVar(){this.getNetwork=function(){NEWINTERFACE==g_net_mode_enable?setNetWork():getAjaxData("api/net/network",(function(e){var t=xml2object(e);if("response"==t.type){g_setting_netWork.NetworkMode=t.response.NetworkMode,g_setting_netWork.NetworkBand=t.response.NetworkBand;var n=0;$.each(g_setting_netWorkModeList,(function(e,t){t[0]!=g_setting_netWork.NetworkMode||(n=1)})),1==n?$("#preferred_mode_select").val(g_setting_netWork.NetworkMode):$("#preferred_mode_select").val(g_setting_netWorkModeList[0][0]);var _=0;for(_=0;_<g_setting_netWorkModeList.length;_++)0==g_setting_netWorkModeList[_][_]&&(autoFlag=!0);autoFlag&&0!=$("#preferred_mode_select").val()?$("#mobile_network_note").show():$("#mobile_network_note").hide(),IsCDMAorAUTO(NW_NULL_STRING+parseInt($("#preferred_mode_select").val(),10))}}),{errorCB:function(){}})},this.getInfomation=function(){networkband_enable&&getAjaxData("api/device/information",(function(e){var t=xml2object(e);"response"==t.type&&setting_dialup_getNetworkBand(getDeviceType(t.response.DeviceName))}),{errorCB:function(){}})},this.getRegister=function(){getAjaxData("api/net/register",(function(e){var t=xml2object(e);"response"==t.type&&(g_setting_register.Mode=parseInt(t.response.Mode,10),g_setting_register.Plmn=t.response.Plmn,g_setting_register.Rat=t.response.Rat,document.getElementById("network_select")&&$("#network_select").val(g_setting_register.Mode))}),{errorCB:function(){}})}}function setNetWorkModeList(e){var t;t=CreateArray(e),g_setting_netWorkModeList=[],$.each(t,(function(e,t){var n="",_=parseInt(t,10);if(t.length>2){var o=0;for(o=0;2*(o+1)<=t.length;o++){var a=t.substr(2*o,2);a=parseInt(a,10),o>0&&(n+="->"),g_networknodes[a]==g_NetworkNodesFlag[a]?n+=g_compoundnetworknodes[a]:n+=g_networknodes[a]}}else 2==t.length&&(n=AUTO[0]==_?g_networknodes[_]:IDS_dialup_label_only.replace("%s",g_networknodes[_]));g_setting_netWorkModeList.push([_,n])}))}var g_myInitVar=new setting_dialup_initVar;function getNetWorkList(){getAjaxData("api/net/net-mode-list",(function(e){var t=xml2object(e);if("response"==t.type){-1==t.response.AccessList.Access.indexOf("0302")&&t.response.AccessList.Access.push("0302"),-1==t.response.AccessList.Access.indexOf("0301")&&t.response.AccessList.Access.push("0301"),-1==t.response.AccessList.Access.indexOf("0201")&&t.response.AccessList.Access.push("0201"),g_network_list_empty=0,g_setting_netWorkModeListIndex=t.response.AccessList.Access;t.response.BandList.Band,t.response.LTEBandList.LTEBand;1==oldornewnet?(setNetModeEnable(g_setting_netWorkModeListIndex),2==g_newnetmodelist.length&&("07"==g_newnetmodelist[0]&&"04"==g_newnetmodelist[1]||"04"==g_newnetmodelist[0]&&"07"==g_newnetmodelist[1])&&setNetWorkModeList(g_setting_netWorkModeListIndex)):setNetWorkModeList(g_setting_netWorkModeListIndex)}}),{sync:!0})}function getNetMode(){getAjaxData("api/net/net-mode",(function(e){"response"==xml2object(e).type&&(g_net_mode_enable=1,g_setting_netWork={NetworkMode:null,NetworkBand:null,LTEBand:null})}),{sync:!0},{errorCB:function(){}})}function getNetworkConfig(){1==g_net_mode_enable&&getNetWorkList(),getConfigData("config/network/networkmode.xml",(function(e){var t=[],n=xml2object(e);"config"==n.type&&("0"==n.config.networkband_enable&&(networkband_enable=!1,$("#band_option").remove()),"0"==n.config.networksearch&&($("#networksearch h2").hide(),$("#networksearch table").hide(),networksearch_enable=!1,networksearch_hide=!0),1==g_network_list_empty&&n.config.NetworkModes.Mode&&(n=n.config.NetworkModes.Mode,$.isArray(n)?t=n:t.push(n),g_setting_netWorkModeList=[],$.each(t,(function(e,t){(t=parseInt(t,10))>=0&&t<=5&&g_setting_netWorkModeList.push([t,NETWORKMODES[t]])}))))}),{sync:!0})}function setting_dialup_saveVar(){if(setting_dialup_gsmWcdmaNotMatch()){g_judgeApplyFlag=!0;var e="";1==g_net_mode_enable?(1!=oldornewnet||2==g_newnetmodelist.length&&("07"==g_newnetmodelist[0]&&"04"==g_newnetmodelist[1]||"04"==g_newnetmodelist[0]&&"07"==g_newnetmodelist[1])?(g_setting_netWork.NetworkMode=parseInt(g_setting_netWork.NetworkMode,10),g_setting_netWork.NetworkMode="0"+g_setting_netWork.NetworkMode):g_setting_netWork.NetworkMode="0"+parseInt(lteenablestring,10),adjustNetworkMode(),e="api/net/net-mode"):e="api/net/network",g_setting_netWork.LTEBand=g_lte_bands,g_setting_netWork.NetworkBand=g_umts_gsm_bands;var t=object2xml("request",g_setting_netWork);button_enable("mobilensetting_apply","0"),g_netsearchresponse=!1,g_setting_register.Mode!=SETTING_DIALUP_MANUAL_SEARCH_NET?showWaitingDialog(common_waiting,setting_label_registering_network):g_setting_register.Mode==SETTING_DIALUP_MANUAL_SEARCH_NET&&showWaitingDialog(common_waiting,IDS_dialup_label_searching_network),saveAjaxData(e,t,(function(e){var t=xml2object(e);isAjaxReturnOK(t)?(0==networksearch_hide?setting_dialup_registerNetMode(g_setting_register.Mode):(closeWaitingDialog(),showInfoDialog(common_success),transactionEnd()),readBack()):(closeWaitingDialog(),ERROR_SYSTEM_BUSY==t.error.code?showInfoDialog(common_system_busy):showInfoDialog(common_failed),transactionEnd(),readBack())}),{timeout:45e3,errorCB:function(){closeWaitingDialog(),showInfoDialog(common_failed),transactionEnd(),readBack()}})}}function setting_dialup_initSelectOption(){var e="";$.each(g_setting_netWorkModeList,(function(t,n){e="<option value = "+n[0]+">"+n[1]+"</option>",$("#preferred_mode_select").append(e)})),$("#preferred_mode_select").change((function(){var e=0;for(e=0;e<g_setting_netWorkModeList.length;e++)0==g_setting_netWorkModeList[e][e]&&(autoFlag=!0);autoFlag&&0!=$("#preferred_mode_select").val()?$("#mobile_network_note").show():$("#mobile_network_note").hide(),g_setting_netWork.NetworkMode=$("#preferred_mode_select").val(),g_setting_register.Mode=$("#network_select").val(),1==networksearch_enable&&MACRO_NET_DUAL_MODE==g_net_mode_type&&IsCDMAorAUTO(NW_NULL_STRING+parseInt($("#preferred_mode_select").val(),10))}));var t="",n=[[SETTING_DIALUP_AUTO_SEARCH_NET,common_auto],[SETTING_DIALUP_MANUAL_SEARCH_NET,common_manual]];document.getElementById("network_select")&&($.each(n,(function(e,n){t="<option value = "+n[0]+">"+n[1]+"</option>",$("#network_select").append(t)})),$("#network_select").change((function(){match_plmn_name(),setting_dialup_menuNetMode(parseInt(this.value,10))})))}function BitwiseAndLarge(e,t){for(var n=0,_=0,o=~(-1<<30),a=1<<30;0!=e&&0!=t;){var r=o&e&o&t;e=Math.floor(e/a),t=Math.floor(t/a);for(var s=n++;s--;)r*=a;_+=r}return _}function getBandString(e){var t="";return 1073741823==e?t=Label_CM_BAND_PREF_ANY:6816640==e?t=common_auto:jQuery.each(g_arrNetworkBand,(function(n,_){BitwiseAndLarge(_[0],e)>0&&(t.length>0&&(t+="/"),t+=_[1])})),t}function setting_dialup_registerNetMode(e){if(SETTING_DIALUP_AUTO_SEARCH_NET!=e)getAjaxData("api/net/plmn-list",(function(e){var t=xml2object(e),n=[];"response"==t.type?(t.response.Networks.Network&&($.isArray(t.response.Networks.Network)?n=t.response.Networks.Network:n.push(t.response.Networks.Network)),setting_dialup_showPlmnList(n)):(startLogoutTimer(),closeWaitingDialog(),showInfoDialog(common_failed),transactionEnd())}),{timeout:24e4,errorCB:function(e,t){startLogoutTimer(),closeWaitingDialog();var n="timeout"==t?common_timeout:common_failed;showInfoDialog(n),transactionEnd()}});else{g_setting_register.Plmn="",g_setting_register.Rat="";var t=object2xml("request",g_setting_register);saveAjaxData("api/net/register",t,(function(e){var t=xml2object(e);closeWaitingDialog(),isAjaxReturnOK(t)?showInfoDialog(common_settings_successfull):ERROR_SYSTEM_BUSY==t.error.code?showInfoDialog(common_system_busy):showInfoDialog(common_failed),transactionEnd(),g_myInitVar.getRegister()}),{timeout:15e4,errorCB:function(){closeWaitingDialog(),showInfoDialog(common_failed),g_myInitVar.getRegister(),transactionEnd()}})}}function setting_dialup_setNetMode(e,t){g_setting_register.Plmn=e,g_setting_register.Rat=t}function setting_dialup_menuNetMode(e){switch(e){case SETTING_DIALUP_AUTO_SEARCH_NET:case SETTING_DIALUP_MANUAL_SEARCH_NET:g_setting_register.Mode=e,$("#network_select").val(e)}}function setting_dialup_searchAndRegister(e){e==SETTING_DIALUP_MANUAL_SEARCH_NET&&(cancelLogoutTimer(),g_setting_register.Plmn="",g_setting_register.Rat="",showWaitingDialog(common_waiting,common_searching)),null==e&&showWaitingDialog(common_waiting,setting_label_registering_network),xmlstr=object2xml("request",g_setting_register),saveAjaxData("api/net/register",xmlstr,(function(t){var n=xml2object(t);if(isAjaxReturnOK(n)){switch(e){case SETTING_DIALUP_MANUAL_SEARCH_NET:setting_dialup_registerNetMode();break;case SETTING_DIALUP_AUTO_SEARCH_NET:showInfoDialog(common_success);break;default:startLogoutTimer(),closeWaitingDialog(),showInfoDialog(common_success),setting_dialup_getCurrPlmn()}transactionEnd()}else startLogoutTimer(),closeWaitingDialog(),ERROR_SYSTEM_BUSY==n.error.code?showInfoDialog(common_system_busy):showInfoDialog(common_failed),g_myInitVar.getRegister(),transactionEnd()}),{timeout:24e4,errorCB:function(e,t){startLogoutTimer(),closeWaitingDialog();var n="timeout"==t?common_timeout:common_failed;showInfoDialog(n),g_myInitVar.getRegister(),transactionEnd()}})}function setting_dialup_getCurrPlmn(){getAjaxData("api/net/current-plmn",(function(e){"response"==xml2object(e).type&&$("#current_plmn").css({display:"none"})}),{errorCB:function(){}})}function setting_dialup_showPlmnList(e){closeWaitingDialog(),call_dialog(setting_label_listing_network,"<table id='plmn_list' class='plmn_list'></table>",common_ok,"pop_OK",common_cancel,"pop_Cancel");var t=[];if(e.length>0){button_enable("pop_OK","0");var n="",_={};getAjaxData("operator.cgi",(function(e){var t=xml2object(e);"response"==t.type&&(_=t.response)}),{sync:!0}),$.each(e,(function(e,o){_.Numeric==o.Numeric&&(void 0!==_.FullName&&_.FullName.length>0&&(o.FullName=_.FullName),void 0!==_.ShortName&&_.ShortName.length>0&&(o.ShortName=_.ShortName),void 0!==o.FullName&&0!=o.FullName.length||(o.FullName=o.ShortName),void 0!==o.ShortName&&0!=o.ShortName.length||(o.ShortName=o.FullName));var a,r=null;switch(o.State){case PLMN_USABLE:r=plmn_label_usable;break;case PLMN_REGISTERED:r=plmn_label_registered;break;case PLMN_FORBIDDEN:r=plmn_label_forbidden;break;default:r=common_unknown}switch(r==plmn_label_registered?(n="checked",button_enable("pop_OK","1")):n="",parseInt(o.Rat,10)){case SETTING_DIALUP_RAT_2G:a=plmn_label_2g;break;case SETTING_DIALUP_RAT_3G:a=plmn_label_3g;break;case SETTING_DIALUP_RAT_4G:a=plmn_label_4g}t+="<tr height = '35'><td ><input type = 'radio' name='netMode' value = '"+e+"' "+n+" id='netMode_"+e+"'></td><td ><label for = 'netMode_"+e+"' >"+o.Numeric+" "+XSSResolveCannotParseChar(o.ShortName)+" "+a+"</label><span>&nbsp; ("+r+")</span></td></tr>"})),$("#pop_OK").bind("click",(function(){if(isButtonEnable("pop_OK")){$("#div_wrapper,.dialog").hide();var t=$("#plmn_list :checked").val();setting_dialup_setNetMode(e[t].Numeric,e[t].Rat),setting_dialup_searchAndRegister(null)}}))}else t="<tr><td>"+setting_label_no_network+"</td></tr>",$("#pop_Cancel").hide(),$("#pop_OK").bind("click",(function(){isButtonEnable("pop_OK")&&($("#div_wrapper,.dialog").hide(),startLogoutTimer(),g_myInitVar.getRegister())})),transactionEnd();$("#plmn_list").append(t),$("#pop_Cancel,.dialog_close_btn").bind("click",(function(){$("#div_wrapper,.dialog").hide(),transactionEnd(),startLogoutTimer()})),$(":radio").bind("click",(function(){button_enable("pop_OK","1")})),reputPosition($("#sms_dialog"),$("#div_wrapper"))}function setting_dialup_connectionStatus(){if(0!=g_netsearchresponse){var e=G_MonitoringStatus.response.ConnectionStatus;MACRO_CONNECTION_CONNECTING==e||MACRO_CONNECTION_CONNECTED==e||MACRO_CONNECTION_DISCONNECTING==e?($(":input").attr("disabled",!0),$("#pop_OK").addClass("disable_btn"),$("#lang").attr("disabled",!1),button_enable("mobilensetting_apply","0")):($(":input").attr("disabled",!1),$("#pop_OK").removeClass("disable_btn"),button_enable("mobilensetting_apply","1"))}}function setting_dialup_gsmWcdmaNotMatch(){var e=g_setting_netWork.NetworkMode,t=g_setting_netWork.NetworkBand;return e!=WCDMA_ONLY[0]||t!=G850G1900&&t!=GSM1900&&t!=GSM1800&&t!=GSM900&&t!=GSM850?e!=GSM_ONLY[0]||t!=W850W1900&&t!=W2100&&t!=W1900&&t!=W850&&t!=W900||(showInfoDialog(dialup_hint_gsm_only_wcdma_band),!1):(showInfoDialog(dialup_hint_wcdma_only_gsm_band),!1)}function getDeviceType(e){var t=e.split("-"),n=null;return n=e.match(/[a-zA-Z]+\d+/),2==t.length&&(n=n+"-"+t[1]),n}function match_plmn_name(){getAjaxData("api/net/current-plmn",(function(e){var t=xml2object(e);t.type}),{sync:!0})}function getNetModeConfig(){function e(e,t){return void 0===e||""==$.trim(e)?t:e}var t=null,n=null,_=null,o=null,a=null,r=null,s=null,i=null,d=null,l=null,g=null,c=null;getConfigData("config/network/net-mode.xml",(function(m){var p=xml2object(m);if("config"==p.type){var u=p.config;t=u.net_works.net_work1,n=u.net_works.net_work2,_=u.net_works.net_work3,o=u.net_works.net_work4,a=u.net_works.net_work5,r=u.net_modes.net_mode1,s=u.net_modes.net_mode2,i=u.net_modes.net_mode3,d=u.net_modes.net_mode4,l=u.net_modes.net_mode5,g=u.net_modes.net_mode6,c=u.net_modes.net_mode7}NETWORKMODES[parseInt(t.index,10)]=e(t.networktype,NETWORKMODES[parseInt(t.index,10)]),NETWORKMODES[parseInt(n.index,10)]=e(n.networktype,NETWORKMODES[parseInt(n.index,10)]),NETWORKMODES[parseInt(_.index,10)]=e(_.networktype,NETWORKMODES[parseInt(_.index,10)]),NETWORKMODES[parseInt(o.index,10)]=e(o.networktype,NETWORKMODES[parseInt(o.index,10)]),NETWORKMODES[parseInt(a.index,10)]=e(a.networktype,NETWORKMODES[parseInt(a.index,10)]),g_networknodes[parseInt(r.index,10)]=e(r.networktype,g_networknodes[parseInt(r.index,10)]),g_networknodes[parseInt(s.index,10)]=e(s.networktype,g_networknodes[parseInt(s.index,10)]),g_networknodes[parseInt(i.index,10)]=e(i.networktype,g_networknodes[parseInt(i.index,10)]),g_networknodes[parseInt(d.index,10)]=e(d.networktype,g_networknodes[parseInt(d.index,10)]),g_networknodes[parseInt(l.index,10)]=e(l.networktype,g_networknodes[parseInt(l.index,10)]),g_networknodes[parseInt(g.index,10)]=e(g.networktype,g_networknodes[parseInt(g.index,10)]),g_networknodes[parseInt(c.index,10)]=e(c.networktype,g_networknodes[parseInt(c.index,10)])}),{sync:!0})}function main_executeBeforeDocumentReady(){getConfigData("config/network/networkmode.xml",(function(e){var t=xml2object(e);"config"==t.type&&"1"!=t.config.networksearchwhenconnected&&addStatusListener("setting_dialup_connectionStatus()")}),{sync:!0})}function dualModeCheck(){1==networksearch_enable&&MACRO_NET_DUAL_MODE==g_net_mode_type&&MACRO_NET_MODE_CHANGE==g_net_mode_change&&(setNetWork(),resetNetModeChange())}function initVsim(){getAjaxData("api/vsim/operateswitch-vsim",(function(e){var t=xml2object(e);if("response"==t.type){var n=t.response;vsim_status=n.vsim_status}}),{sync:!0})}redirectOnCondition(null,"mobilenetworksettings"),main_executeBeforeDocumentReady();var g_lte_bands,g_umts_gsm_bands,lte_band_1=1,lte_band_3=4,lte_band_7=64,lte_band_8=128,lte_band_20=524288,lte_band_38=137438953472,lte_band_40=549755813888,umts_band_1=4194304,umts_band_8=562949953421312,umts_band_all=562949957615616,gsm_band_850=524288,gsm_band_900=768,gsm_band_1800=128,gsm_band_1900=2097152,gsm_band_all=2622336;function initBandSel(){if("7FFFFFFFFFFFFFFF"==(g_lte_bands=g_setting_netWork.LTEBand))$("#LTE_All").attr("checked",!0),$("#LTE_B1").attr("checked",!1),$("#LTE_B3").attr("checked",!1),$("#LTE_B7").attr("checked",!1),$("#LTE_B8").attr("checked",!1),$("#LTE_B20").attr("checked",!1),$("#LTE_B38").attr("checked",!1),$("#LTE_B40").attr("checked",!1),$("#LTE_B1").attr("disabled","disabled"),$("#LTE_B3").attr("disabled","disabled"),$("#LTE_B7").attr("disabled","disabled"),$("#LTE_B8").attr("disabled","disabled"),$("#LTE_B20").attr("disabled","disabled"),$("#LTE_B38").attr("disabled","disabled"),$("#LTE_B40").attr("disabled","disabled");else{$("#LTE_All").attr("checked",!1);var e=parseInt(g_lte_bands,16);$("#LTE_B1").attr("checked",0!=(e&lte_band_1)),$("#LTE_B3").attr("checked",0!=(e&lte_band_3)),$("#LTE_B7").attr("checked",0!=(e&lte_band_7)),$("#LTE_B8").attr("checked",0!=(e&lte_band_8)),$("#LTE_B20").attr("checked",0!=(e&lte_band_20)),$("#LTE_B38").attr("checked",0!=BitwiseAndLarge(e,lte_band_38)),$("#LTE_B40").attr("checked",0!=BitwiseAndLarge(e,lte_band_40)),$("#LTE_B1").removeAttr("disabled"),$("#LTE_B3").removeAttr("disabled"),$("#LTE_B7").removeAttr("disabled"),$("#LTE_B8").removeAttr("disabled"),$("#LTE_B20").removeAttr("disabled"),$("#LTE_B38").removeAttr("disabled"),$("#LTE_B40").removeAttr("disabled")}if("3FFFFFFF"==(g_umts_gsm_bands=g_setting_netWork.NetworkBand))$("#UMTS_GSM_All").attr("checked",!0),$("#UMTS_B1").attr("checked",!1),$("#UMTS_B8").attr("checked",!1),$("#GSM_850").attr("checked",!1),$("#GSM_900").attr("checked",!1),$("#GSM_1800").attr("checked",!1),$("#GSM_1900").attr("checked",!1),$("#UMTS_B1").attr("disabled","disabled"),$("#UMTS_B8").attr("disabled","disabled"),$("#GSM_850").attr("disabled","disabled"),$("#GSM_900").attr("disabled","disabled"),$("#GSM_1800").attr("disabled","disabled"),$("#GSM_1900").attr("disabled","disabled");else{$("#UMTS_GSM_All").attr("checked",!1);var t=parseInt(g_umts_gsm_bands,16);$("#UMTS_B1").attr("checked",0!=(t&umts_band_1)),$("#UMTS_B8").attr("checked",0!=BitwiseAndLarge(t,umts_band_8)),$("#GSM_850").attr("checked",0!=(t&gsm_band_850)),$("#GSM_900").attr("checked",0!=(t&gsm_band_900)),$("#GSM_1800").attr("checked",0!=(t&gsm_band_1800)),$("#GSM_1900").attr("checked",0!=(t&gsm_band_1900)),$("#UMTS_B1").removeAttr("disabled"),$("#UMTS_B8").removeAttr("disabled"),$("#GSM_850").removeAttr("disabled"),$("#GSM_900").removeAttr("disabled"),$("#GSM_1800").removeAttr("disabled"),$("#GSM_1900").removeAttr("disabled")}}function adjustNetworkMode(){var e=g_setting_netWork.NetworkMode;if("00"==e&&(e="030201"),"7FFFFFFFFFFFFFFF"!=g_lte_bands&&0==parseInt(g_lte_bands,16)&&(e=e.replace("03",""),g_setting_netWork.NetworkMode=e),"3FFFFFFF"!=g_umts_gsm_bands){var t=parseInt(g_umts_gsm_bands,16);0==BitwiseAndLarge(t,umts_band_all)&&(e=e.replace("02",""),g_setting_netWork.NetworkMode=e),0==(t&gsm_band_all)&&(e=e.replace("01",""),g_setting_netWork.NetworkMode=e)}}function readBack(){getAjaxData("api/net/net-mode",(function(e){var t=xml2object(e);"response"==t.type&&(g_setting_netWork.NetworkMode=parseInt(t.response.NetworkMode,10),g_setting_netWork.NetworkBand=t.response.NetworkBand,g_setting_netWork.LTEBand=t.response.LTEBand,$("#preferred_mode_select").val(g_setting_netWork.NetworkMode),initBandSel())}),{errorCB:function(){}})}function getNewNetMode(){getAjaxData("api/net/net-feature-switch",(function(e){var t=xml2object(e);oldornewnet="response"==t.type?t.response.net_premode_switch:0}),{sync:!0})}$(document).ready((function(){MACRO_NET_DUAL_MODE==g_net_mode_type&&addStatusListener("dualModeCheck()"),getNewNetMode(),getNetModeConfig(),getNetMode(),getNetworkConfig(),1!=oldornewnet||2==g_newnetmodelist.length&&("07"==g_newnetmodelist[0]&&"04"==g_newnetmodelist[1]||"04"==g_newnetmodelist[0]&&"07"==g_newnetmodelist[1])?(g_myInitVar.getNetwork(),g_myInitVar.getInfomation(),g_myInitVar.getRegister(),setting_dialup_initSelectOption()):(supportNetEnabled(),g_myInitVar.getInfomation(),g_myInitVar.getRegister(),setting_dialup_enable()),1==g_moduleswitch.vsim_enabled&&(initVsim(),2!=vsim_status&&(button_enable("mobilensetting_apply","0"),$("input:not(#lang)").attr("disabled",!0),$("select:not(#lang)").attr("disabled",!0),showInfoDialog(IDS_vsim_function_show))),$("#mobilensetting_apply").bind("click",(function(){if(isButtonEnable("mobilensetting_apply")){1!=oldornewnet||2==g_newnetmodelist.length&&("07"==g_newnetmodelist[0]&&"04"==g_newnetmodelist[1]||"04"==g_newnetmodelist[0]&&"07"==g_newnetmodelist[1])||(onlteenable?ltenet():net3gwork()),getAjaxData("api/monitoring/status",(function(e){var t=xml2object(e);"response"==t.type&&(G_MonitoringStatus=t)}),{sync:!0});var e=G_MonitoringStatus.response.ConnectionStatus;MACRO_CONNECTION_CONNECTED==e?showConfirmDialog(IDS_networksettings_search_hint,setting_dialup_saveVar,(function(){})):setting_dialup_saveVar()}})),$("input[name='LTE_Band']").click((function(){if($("#LTE_All").get(0).checked)g_lte_bands="7FFFFFFFFFFFFFFF",$("#LTE_B1").attr("disabled","disabled"),$("#LTE_B3").attr("disabled","disabled"),$("#LTE_B7").attr("disabled","disabled"),$("#LTE_B8").attr("disabled","disabled"),$("#LTE_B20").attr("disabled","disabled"),$("#LTE_B38").attr("disabled","disabled"),$("#LTE_B40").attr("disabled","disabled");else{var e=0;$("#LTE_B1").get(0).checked&&(e+=lte_band_1),$("#LTE_B3").get(0).checked&&(e+=lte_band_3),$("#LTE_B7").get(0).checked&&(e+=lte_band_7),$("#LTE_B8").get(0).checked&&(e+=lte_band_8),$("#LTE_B20").get(0).checked&&(e+=lte_band_20),$("#LTE_B38").get(0).checked&&(e+=lte_band_38),$("#LTE_B40").get(0).checked&&(e+=lte_band_40),g_lte_bands=e.toString(16).toUpperCase(),$("#LTE_B1").removeAttr("disabled"),$("#LTE_B3").removeAttr("disabled"),$("#LTE_B7").removeAttr("disabled"),$("#LTE_B8").removeAttr("disabled"),$("#LTE_B20").removeAttr("disabled"),$("#LTE_B38").removeAttr("disabled"),$("#LTE_B40").removeAttr("disabled")}})),$("input[name='UMTS_GSM_Band']").click((function(){if($("#UMTS_GSM_All").get(0).checked)g_umts_gsm_bands="3FFFFFFF",$("#UMTS_B1").attr("disabled","disabled"),$("#UMTS_B8").attr("disabled","disabled"),$("#GSM_850").attr("disabled","disabled"),$("#GSM_900").attr("disabled","disabled"),$("#GSM_1800").attr("disabled","disabled"),$("#GSM_1900").attr("disabled","disabled");else{var e=0;$("#UMTS_B1").get(0).checked&&(e+=umts_band_1),$("#UMTS_B8").get(0).checked&&(e+=umts_band_8),$("#GSM_850").get(0).checked&&(e+=gsm_band_850),$("#GSM_900").get(0).checked&&(e+=gsm_band_900),$("#GSM_1800").get(0).checked&&(e+=gsm_band_1800),$("#GSM_1900").get(0).checked&&(e+=gsm_band_1900),g_umts_gsm_bands=e.toString(16).toUpperCase(),$("#UMTS_B1").removeAttr("disabled"),$("#UMTS_B8").removeAttr("disabled"),$("#GSM_850").removeAttr("disabled"),$("#GSM_900").removeAttr("disabled"),$("#GSM_1800").removeAttr("disabled"),$("#GSM_1900").removeAttr("disabled")}})),$("#mobile_network_note td:eq(1)").css({color:"#ff0000"})}));var onlteenable=!1;function setting_dialup_enable(){for(var e=0;e<g_newnetmodelist.length;e++){if("03"==g_newnetmodelist[e]){onlteenable=!0;break}onlteenable=!1}onlteenable?($(".net_lte_enable").show(),$(".net_mode_select").hide(),$("#mobile_network_note").hide(),0==g_setting_netWork.NetworkMode?$("#net_lte_enable").attr("checked",!0):$("#net_lte_enable").attr("checked",!1),1==g_newnetmodelist.length&&"03"==g_newnetmodelist[0]&&($(".dialup_label_network").hide(),$(".net_lte_enable").hide())):($(".net_3g_enable").show(),$(".net_mode_select").hide(),$("#mobile_network_note").hide(),0==g_setting_netWork.NetworkMode?$("#net3gwork").attr("checked",!0):$("#net3gwork").attr("checked",!1),("1"==g_newnetmodelist.length||"07"==g_newnetmodelist[0]&&"02"==g_newnetmodelist[1]||"02"==g_newnetmodelist[0]&&"07"==g_newnetmodelist[1])&&($(".dialup_label_network").hide(),$(".net_3g_enable").hide()));var t="",n=[[SETTING_DIALUP_AUTO_SEARCH_NET,common_auto],[SETTING_DIALUP_MANUAL_SEARCH_NET,common_manual]];document.getElementById("network_select")&&($.each(n,(function(e,n){t="<option value = "+n[0]+">"+n[1]+"</option>",$("#network_select").append(t)})),$("#network_select").change((function(){match_plmn_name(),setting_dialup_menuNetMode(parseInt(this.value,10))})))}function supportNetEnabled(){getAjaxData("api/net/net-mode",(function(e){var t=xml2object(e);"response"==t.type&&(g_setting_netWork.NetworkMode=parseInt(t.response.NetworkMode,10),IsCDMAorAUTO(NW_NULL_STRING+g_setting_netWork.NetworkMode),g_setting_netWork.NetworkBand=t.response.NetworkBand,g_setting_netWork.LTEBand=t.response.LTEBand)}),{sync:!0})}var g_newnetmodelist=[],oldornewnet=0;function setNetModeEnable(e){var t;t=CreateArray(e);var n=[];$.each(t,(function(e,t){var _="";if(t.length>2){var o=0;for(o=0;2*(o+1)<=t.length;o++)"00"!=(_=t.substr(2*o,2))&&n.push(_)}else 2==t.length&&"00"!=t&&n.push(t)}));for(var _=0;_<n.length;_++){for(var o=_+1;o<n.length;o++)n[_]==n[o]&&(o=++_);g_newnetmodelist.push(n[_])}}var lteenablestring="";function ltenet(){if($("#net_lte_enable").get(0).checked)lteenablestring="00";else{var e=g_newnetmodelist.length;if(2==e)$.each(g_newnetmodelist,(function(e,t){lteenablestring="01"==g_newnetmodelist[e]?"01":"02"}));else if(3==e){for(var t=!1,n=!1,_=0;_<g_newnetmodelist.length;_++)"07"==g_newnetmodelist[_]?t=!0:"01"==g_newnetmodelist[_]&&(n=!0);lteenablestring=t?n?"040701":"040702":"0201"}else 4==e&&(lteenablestring="04070201")}}function net3gwork(){lteenablestring=$("#net3gwork").get(0).checked?"00":"01"}
